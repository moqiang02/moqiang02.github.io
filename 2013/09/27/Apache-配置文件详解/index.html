<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Apache 配置文件详解 | 自强不息</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="＃＃＃ Section 1: Global Environment&#x2F;&#x2F;当服务器响应主机头（header）信息时显示Apache的版本和操作系统名称ServerTokens OS&#x2F;&#x2F;设置服务器的根目录ServerRoot “&#x2F;etc&#x2F;httpd” ＃ScoreBoardFile run&#x2F;httpd.scoreboard &#x2F;&#x2F;设置运行Apache时使用的PidFile的路径PidFile run&#x2F;ht">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache 配置文件详解">
<meta property="og:url" content="http://moqiang02.github.io/2013/09/27/Apache-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="自强不息">
<meta property="og:description" content="＃＃＃ Section 1: Global Environment&#x2F;&#x2F;当服务器响应主机头（header）信息时显示Apache的版本和操作系统名称ServerTokens OS&#x2F;&#x2F;设置服务器的根目录ServerRoot “&#x2F;etc&#x2F;httpd” ＃ScoreBoardFile run&#x2F;httpd.scoreboard &#x2F;&#x2F;设置运行Apache时使用的PidFile的路径PidFile run&#x2F;ht">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2013-09-27T11:22:14.000Z">
<meta property="article:modified_time" content="2022-10-26T09:28:53.699Z">
<meta property="article:author" content="moqiang">
<meta name="twitter:card" content="summary">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">自强不息</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://moqiang02.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Apache-配置文件详解" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2013/09/27/Apache-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" class="article-date">
  <time class="dt-published" datetime="2013-09-27T11:22:14.000Z" itemprop="datePublished">2013-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/apache/">apache</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Apache 配置文件详解
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      

          <!-- rex -->
          

        <p>＃＃＃ Section 1: Global Environment<br>//当服务器响应主机头（header）信息时显示Apache的版本和操作系统名称<br>ServerTokens OS<br>//设置服务器的根目录<br>ServerRoot “/etc/httpd”</p>
<p>＃ScoreBoardFile run/httpd.scoreboard</p>
<p>//设置运行Apache时使用的PidFile的路径<br>PidFile run/httpd.pid</p>
<p>//若300秒后没有收到或送出任何数据就切断该连接<br>Timeout 300</p>
<span id="more"></span>
<p>//不使用保持连接的功能，即客户一次请求连接只能响应一个文件<br>/建议用户将此参数的值设置为On，即允许使用保持连接的功能<br>KeepAlive Off</p>
<p>//在使用保持连接功能时，设置客户一次请求连接能响应文件的最大上限<br>MaxKeepAliveRequests 100</p>
<p>//在使用保持连接功能时，两个相邻的连接的时间间隔超过15秒，就切断连接<br>KeepAliveTimeout 15</p>
<p>＃＃<br>＃＃ Server-Pool Size Regulation (MPM specific)<br>＃＃<br>＃ prefork MPM<br>＃ StartServers: number of server processes to start<br>＃ MinSpareServers: minimum number of server processes which are kept spare<br>＃ MaxSpareServers: maximum number of server processes which are kept spare<br>＃ MaxClients: maximum number of server processes allowed to start<br>＃ MaxRequestsPerChild: maximum number of requests a server process serves<br>//设置使用Prefork MPM运行方式的参数，此运行方式是Red hat默认的方式<br><IfModule prefork.c></p>
<p>//设置服务器启动时运行的进程数<br>StartServers     8</p>
<p>//Apache在运行时会根据负载的轻重自动调整空闲子进程的数目<br>//若存在低于5个空闲子进程，就创建一个新的子进程准备为客户提供服务<br>MinSpareServers   5</p>
<p>//若存在高于20个空闲子进程，就创建逐一删除子进程来提高系统性能<br>MaxSpareServers   20</p>
<p>//限制同一时间的连接数不能超过150<br>MaxClients     150</p>
<p>//限制每个子进程在结束处理请求之前能处理的连接请求为1000<br>MaxRequestsPerChild 1000<br></IfModule></p>
<p>＃ worker MPM<br>＃ StartServers: initial number of server processes to start<br>//设置使用Worker MPM运行方式的参数<br><IfModule worker.c><br>StartServers       2<br>MaxClients       150<br>MinSpareThreads   25<br>MaxSpareThreads   75<br>ThreadsPerChild   25<br>MaxRequestsPerChild 0<br></IfModule></p>
<p>＃ perchild MPM<br>＃ NumServers: constant number of server processes<br>//设置使用perchild MPM运行方式的参数<br><IfModule perchild.c><br>NumServers       5<br>StartThreads       5<br>MinSpareThreads     5<br>MaxSpareThreads   10<br>MaxThreadsPerChild 20<br>MaxRequestsPerChild 0<br></IfModule></p>
<p>//设置服务器的监听端口<br>＃Listen 12.34.56.78:80<br>Listen 202.112.85.101:80</p>
<p>＃<br>＃ Load config files from the config directory “/etc/httpd/conf.d”.<br>//将/etc/httpd/conf.d目录下所有以conf结尾的配置文件包含进来<br>Include conf.dpublic_html&gt;<br>＃   AllowOverride FileInfo AuthConfig Limit<br>＃   Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec<br>＃   <Limit GET POST OPTIONS><br>＃     Order allow,deny<br>＃     Allow from all<br>＃   </Limit><br>＃   <LimitExcept GET POST OPTIONS><br>＃     Order deny,allow<br>＃     Deny from all<br>＃   </LimitExcept><br>＃</Directory></p>
<p>//当访问服务器时，依次查找页面Index.html index.htm.var<br>DirectoryIndex index.html index.html.var</p>
<p>//指定保护目录配置文件的名称<br>AccessFileName .htaccess</p>
<p>//拒绝访问以.ht开头的文件,即保证.htaccess不被访问<br>&lt;Files ~ “^.ht”&gt;<br>Order allow,deny<br>Deny from all<br></Files></p>
<p>//指定负责处理MIME对应格式的配置文件的存放位置<br>TypesConfig /etc/mime.types<br>//指定默认的MIME文件类型为纯文本或HTML文件<br>DefaultType text/plain</p>
<p>//当mod_mime_magic.c模块被加载时，指定magic信息码配置文件的存放位置<br><IfModule mod_mime_magic.c><br>＃   MIMEMagicFile /usr/share/magic.mime<br>MIMEMagicFile conf/magic<br></IfModule></p>
<p>//只记录连接Apache服务器的Ip地址，而不纪录主机名<br>HostnameLookups Off<br>//指定错误日志存放位置<br>ErrorLog logs/error_log<br>//指定记录的错误信息的详细等级为warn等级<br>LogLevel warn<br>//定义四中记录日志的格式<br>LogFormat “%h %l %u %t “%r” %&gt;s %b “%{ Referer }i” “%{ User-Agent }i”” combined<br>LogFormat “%h %l %u %t “%r” %&gt;s %b” common<br>LogFormat “%{ Referer }i -&gt; %U” referer<br>LogFormat “%{ User-agent }i” agent</p>
<p>//指定访问日志的纪录格式为combined（混合型），并指定访问日志存放位置<br>＃ CustomLog logs/access_log common<br>CustomLog logs/access_log combined<br>＃CustomLog logs/referer_log referer<br>＃CustomLog logs/agent_log agent<br>＃CustomLog logs/access_log combined</p>
<p>//设置apache自己产生的页面中使用apache服务器版本的签名<br>ServerSignature On</p>
<p>//设置内容协商目录的访问别名<br>Alias /icons/ “/var/www/icons/“<br>//设置/var/www/icons/的访问权限<br>&lt;Directory “/var/www/icons”&gt;<br>//MultiViews 使用内容协商功决定被发送的网页的性质<br>Options Indexes MultiViews<br>AllowOverride None<br>Order allow,deny<br>Allow from all<br></Directory></p>
<p>//设置网页邮件服务<br>Alias /webmail “/usr/share/squirrelmail”</p>
<p>&lt;Directory “/usr/share/squirrelmail”&gt;<br>Options Indexes MultiViews<br>AllowOverride None<br>Order allow,deny<br>Allow from all<br></Directory></p>
<p>//设置apache手册的访问别名<br>Alias /manual “/var/www/manual”</p>
<p>&lt;Directory “/var/www/manual”&gt;<br>Options Indexes FollowSymLinks MultiViews<br>AllowOverride None<br>Order allow,deny<br>Allow from all<br></Directory><br>//指定DAV加锁数据库文件的存放位置<br><IfModule mod_dav_fs.c><br>＃ Location of the WebDAV lock database.<br>DAVLockDB /var/lib/dav/lockdb<br></IfModule></p>
<p>Alias /docs   “/home/EMU/webmail/docs/“</p>
<p>&lt;Directory “/home/EMU/webmail/docs”&gt;<br>Options Indexes FollowSymLinks MultiViews<br>AllowOverride None<br>Order allow,deny<br>Allow from all<br></Directory></p>
<IfModule mod_dav_fs.c>
＃ Location of the WebDAV lock database.
DAVLockDB /var/lib/dav/lockdb
</IfModule>

<p>//设置CGI目录的访问别名<br>scrīptAlias /cgi-bin/ “/var/www/cgi-bin/“</p>
<p>//由于red hat中不使用worker MPM运行方式，所以不加载mod_cgid.c模块<br><IfModule mod_cgid.c><br>＃<br>＃ Additional to mod_cgid.c settings, mod_cgid has scrīptsock <path><br>＃ for setting UNIX socket for communicating with cgid.<br>＃<br>＃scrīptsock         logs/cgisock<br></IfModule></p>
<p>//设置CGI目录的访问权限<br>&lt;Directory “/var/www/cgi-bin”&gt;<br>AllowOverride None<br>Options None<br>Order allow,deny<br>Allow from all<br></Directory></p>
<p>//重定向连接<br>＃ Redirect permanent /foo<a target="_blank" rel="noopener" href="http://www.example.com/bar">http://www.example.com/bar</a></p>
<p>//设置自动生成目录列表的显示方式<br>//FancyIndexing 对每种类型的文件前加上一个小图标以示区别<br>//VersionSort 对同一个软件的多个版本进行排序<br>//NameWidth=* 文件名字段自动适应当前目录下的最长文件名<br>IndexOptions FancyIndexing VersionSort NameWidth=*</p>
<p>//当使用IndexOptions FancyIndexing之后，配置下面的参数<br>//用于告知服务器在遇到不同的文件类型或扩展名时采用MIME编码格式<br>//辨别文件类型并显示相应的图标<br>AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip</p>
<p>AddIconByType (TXT,/icons/text.gif) text/*<br>AddIconByType (IMG,/icons/image2.gif) image/*<br>AddIconByType (SND,/icons/sound2.gif) audio/*<br>AddIconByType (VID,/icons/movie.gif) video/*</p>
<p>//当使用IndexOptions FancyIndexing之后，配置下面的参数<br>//用于告知服务器在遇到不同的文件类型或扩展名时采用所指定的格式<br>//并显示相应的图标<br>AddIcon /icons/binary.gif .bin .exe<br>AddIcon /icons/binhex.gif .hqx<br>AddIcon /icons/tar.gif .tar<br>AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv<br>AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip<br>AddIcon /icons/a.gif .ps .ai .eps<br>AddIcon /icons/layout.gif .html .shtml .htm .pdf<br>AddIcon /icons/text.gif .txt<br>AddIcon /icons/c.gif .c<br>AddIcon /icons/p.gif .pl .py<br>AddIcon /icons/f.gif .for<br>AddIcon /icons/dvi.gif .dvi<br>AddIcon /icons/uuencoded.gif .uu<br>AddIcon /icons/scrīpt.gif .conf .sh .shar .csh .ksh .tcl<br>AddIcon /icons/tex.gif .tex<br>AddIcon /icons/bomb.gif core</p>
<p>AddIcon /icons/back.gif ..<br>AddIcon /icons/hand.right.gif README<br>AddIcon /icons/folder.gif ^^DIRECTORY^^<br>AddIcon /icons/blank.gif ^^BLANKICON^^</p>
<p>//当使用IndexOptions FancyIndexing之后，且无法识别文件类型时<br>//显示此处定义的图标<br>DefaultIcon /icons/unknown.gif</p>
<p>＃<br>＃ AddDescrīption allows you to place a short descrīption after a file in<br>＃ server-generated indexes. These are only displayed for FancyIndexed<br>＃ directories.<br>＃ Format: AddDescrīption “descrīption” filename<br>＃<br>＃AddDescrīption “GZIP compressed document” .gz<br>＃AddDescrīption “tar archive” .tar<br>＃AddDescrīption “GZIP compressed tar archive” .tgz</p>
<p>//当服务器自动列出目录列表时，在所生成的页面之后显示readme.html的内容<br>ReadmeName README.html<br>//当服务器自动列出目录列表时，在所生成的页面之前显示header.html的内容<br>HeaderName HEADER.html</p>
<p>＃<br>＃ IndexIgnore is a set of filenames which directory indexing should ignore<br>＃ and not include in the listing. Shell-style wildcarding is permitted.<br>＃<br>IndexIgnore .??* <em>~ <em>＃ HEADER</em> README</em> RCS CVS *,v *,t</p>
<p>//设置在线浏览用户可以实时解压缩.z   .gz   .tgz类型的文件<br>//并非所有浏览器都支持<br>AddEncoding x-compress Z<br>AddEncoding x-gzip gz tgz</p>
<p>＃<br>＃ DefaultLanguage nl<br>＃ Danish (da) - Dutch (nl) - English (en) - Estonian (et)<br>＃ French (fr) - German (de) - Greek-Modern (el)<br>＃ Italian (it) - Norwegian (no) - Norwegian Nynorsk (nn) - Korean (kr)<br>＃ Portugese (pt) - Luxembourgeois* (ltz)<br>＃ Spanish (es) - Swedish (sv) - Catalan (ca) - Czech(cz)<br>＃ Polish (pl) - Brazilian Portuguese (pt-br) - Japanese (ja)<br>＃ Russian (ru) - Croatian (hr)<br>＃<br>//设置网页内容的语言种类（浏览器要启用内容协商）<br>//对中文网页，此项无实际意义<br>AddLanguage da .dk<br>AddLanguage nl .nl<br>AddLanguage en .en<br>AddLanguage et .et<br>AddLanguage fr .fr<br>AddLanguage de .de<br>AddLanguage he .he<br>AddLanguage el .el<br>AddLanguage it .it<br>AddLanguage ja .ja<br>AddLanguage pl .po<br>AddLanguage kr .kr<br>AddLanguage pt .pt<br>AddLanguage nn .nn<br>AddLanguage no .no<br>AddLanguage pt-br .pt-br<br>AddLanguage ltz .ltz<br>AddLanguage ca .ca<br>AddLanguage es .es<br>AddLanguage sv .se<br>AddLanguage cz .cz<br>AddLanguage ru .ru<br>AddLanguage tw .tw<br>AddLanguage zh-tw .tw<br>AddLanguage hr .hr</p>
<p>//当启用内容协商时，设置语言的先后顺序<br>LanguagePriority en da nl et fr de el it ja kr no pl pt pt-br ltz ca es sv tw</p>
<p>//Prefer 当有多种语言可以匹配时，使用LanguagePriority 列表的第一项<br>//Fallback 当没有语言可以匹配时，使用LanguagePriority 列表的第一项<br>ForceLanguagePriority Prefer Fallback</p>
<p>//设置默认字符集<br>AddDefaultCharset ISO-8859-1</p>
<p>//设置各种字符集<br>AddCharset ISO-8859-1 .iso8859-1 .latin1<br>AddCharset ISO-8859-2 .iso8859-2 .latin2 .cen<br>AddCharset ISO-8859-3 .iso8859-3 .latin3<br>AddCharset ISO-8859-4 .iso8859-4 .latin4<br>AddCharset ISO-8859-5 .iso8859-5 .latin5 .cyr .iso-ru<br>AddCharset ISO-8859-6 .iso8859-6 .latin6 .arb<br>AddCharset ISO-8859-7 .iso8859-7 .latin7 .grk<br>AddCharset ISO-8859-8 .iso8859-8 .latin8 .heb<br>AddCharset ISO-8859-9 .iso8859-9 .latin9 .trk<br>AddCharset ISO-2022-JP .iso2022-jp .jis<br>AddCharset ISO-2022-KR .iso2022-kr .kis<br>AddCharset ISO-2022-CN .iso2022-cn .cis<br>AddCharset Big5     .Big5     .big5<br>＃ For russian, more than one charset is used (depends on client, mostly):<br>AddCharset WINDOWS-1251 .cp-1251   .win-1251<br>AddCharset CP866     .cp866<br>AddCharset KOI8-r     .koi8-r .koi8-ru<br>AddCharset KOI8-ru   .koi8-uk .ua<br>AddCharset ISO-10646-UCS-2 .ucs2<br>AddCharset ISO-10646-UCS-4 .ucs4<br>AddCharset UTF-8     .utf8</p>
<p>＃ The set below does not map to a specific (iso) standard<br>＃ but works on a fairly wide range of browsers. Note that<br>＃ capitalization actually matters (it should not, but it<br>＃ does for some browsers).<br>＃<br>＃ See<a href="ftp://ftp.isi.edu/in-notes/iana/assignments/character-sets">ftp://ftp.isi.edu/in-notes/iana/assignments/character-sets</a><br>＃ for a list of sorts. But browsers support few.<br>＃<br>AddCharset GB2312     .gb2312 .gb<br>AddCharset utf-7     .utf7<br>AddCharset utf-8     .utf8<br>AddCharset big5     .big5 .b5<br>AddCharset EUC-TW     .euc-tw<br>AddCharset EUC-JP     .euc-jp<br>AddCharset EUC-KR     .euc-kr<br>AddCharset shift_jis   .sjis</p>
<p>//添加新的MIME类型（避免用户编辑/etc/mime.types)<br>AddType application/x-tar .tgz</p>
<p>＃<br>＃ AddHandler allows you to map certain file extensions to “handlers”:<br>＃ actions unrelated to filetype. These can be either built into the server<br>＃ or added with the Action directive (see below)<br>＃<br>＃ To use CGI scrīpts outside of scrīptAliased directories:<br>＃ (You will also need to add “ExecCGI” to the “Options” directive.)<br>＃<br>＃AddHandler cgi-scrīpt .cgi</p>
<p>＃<br>＃ For files that include their own HTTP headers:<br>＃<br>＃AddHandler send-as-is asis</p>
<p>//设置apcche对某些扩展名的处理方式<br>AddHandler imap-file map<br>AddHandler type-map var</p>
<p>//使用过滤器执行SSI<br>AddOutputFilter INCLUDES .shtml</p>
<p>//设置错误页面目录的别名<br>Alias /error/ “/var/www/error/“</p>
<IfModule mod_negotiation.c>
<IfModule mod_include.c>
<Directory "/var/www/error">
AllowOverride None
Options IncludesNoExec
AddOutputFilter Includes html
AddHandler type-map var
Order allow,deny
Allow from all
LanguagePriority en es de fr
ForceLanguagePriority Prefer Fallback
</Directory>
//设置错误输出页面
ErrorDocument 400 /error/HTTP_BAD_REQUEST.html.var
ErrorDocument 401 /error/HTTP_UNAUTHORIZED.html.var
ErrorDocument 403 /error/HTTP_FORBIDDEN.html.var
ErrorDocument 404 /error/HTTP_NOT_FOUND.html.var
ErrorDocument 405 /error/HTTP_METHOD_NOT_ALLOWED.html.var
ErrorDocument 408 /error/HTTP_REQUEST_TIME_OUT.html.var
ErrorDocument 410 /error/HTTP_GONE.html.var
ErrorDocument 411 /error/HTTP_LENGTH_REQUIRED.html.var
ErrorDocument 412 /error/HTTP_PRECONDITION_FAILED.html.var
ErrorDocument 413 /error/HTTP_REQUEST_ENTITY_TOO_LARGE.html.var
ErrorDocument 414 /error/HTTP_REQUEST_URI_TOO_LARGE.html.var
ErrorDocument 415 /error/HTTP_SERVICE_UNAVAILABLE.html.var
ErrorDocument 500 /error/HTTP_INTERNAL_SERVER_ERROR.html.var
ErrorDocument 501 /error/HTTP_NOT_IMPLEMENTED.html.var
ErrorDocument 502 /error/HTTP_BAD_GATEWAY.html.var
ErrorDocument 503 /error/HTTP_SERVICE_UNAVAILABLE.html.var
ErrorDocument 506 /error/HTTP_VARIANT_ALSO_VARIES.html.var

</IfModule>
</IfModule>
//设置浏览器匹配
BrowserMatch "Mozilla/2" nokeepalive
BrowserMatch "MSIE 4.0b2;" nokeepalive downgrade-1.0 force-response-1.0
BrowserMatch "RealPlayer 4.0" force-response-1.0
BrowserMatch "Java/1.0" force-response-1.0
BrowserMatch "JDK/1.0" force-response-1.0
BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-carefully
BrowserMatch "^WebDrive" redirect-carefully

<p>＃<br>＃ Allow server status reports, with the URL of <a target="_blank" rel="noopener" href="http://servername/server-status">http://servername/server-status</a><br>＃ Change the “.your-domain.com” to match your domain to enable.<br>＃<br>＃&lt;Location /server-status&gt;<br>＃   SetHandler server-status<br>＃   Order deny,allow<br>＃   Deny from all<br>＃   Allow from .your-domain.com<br>＃</Location></p>
<p>＃<br>＃ Allow remote server configuration reports, with the URL of<br>＃ <a target="_blank" rel="noopener" href="http://servername/server-info">http://servername/server-info</a> (requires that mod_info.c be loaded).<br>＃ Change the “.your-domain.com” to match your domain to enable.<br>＃<br>＃&lt;Location /server-info&gt;<br>＃   SetHandler server-info<br>＃   Order deny,allow<br>＃   Deny from all<br>＃   Allow from .your-domain.com<br>＃</Location></p>
<p>//设置APache为代理服务器<br>＃ Proxy Server directives. Uncomment the following lines to<br>＃ enable the proxy server:<br>＃<br>＃<IfModule mod_proxy.c><br>＃ProxyRequests On<br>＃<br>＃&lt;Proxy *&gt;<br>＃   Order deny,allow<br>＃   Deny from all<br>＃   Allow from .your-domain.com<br>＃</Proxy></p>
<p>＃<br>＃ Enable/disable the handling of HTTP/1.1 “Via:” headers.<br>＃ (“Full” adds the server version; “Block” removes all outgoing Via: headers)<br>＃ Set to one of: Off | On | Full | Block<br>＃<br>＃ProxyVia On</p>
<p>＃<br>＃ To enable the cache as well, edit and uncomment the following lines:<br>＃ (no cacheing without CacheRoot)<br>＃<br>＃CacheRoot “/etc/httpd/proxy”<br>＃CacheSize 5<br>＃CacheGcInterval 4<br>＃CacheMaxExpire 24<br>＃CacheLastModifiedFactor 0.1<br>＃CacheDefaultExpire 1<br>＃NoCache a-domain.com another-domain.edu joes.garage-sale.com</p>
<p>＃</IfModule><br>＃ End of proxy directives.</p>
<p>//设置虚拟主机<br>＃＃＃ Section 3: Virtual Hosts<br>＃<br>＃ VirtualHost: If you want to maintain multiple domains/hostnames on your<br>＃ machine you can setup VirtualHost containers for them. Most configurations<br>＃ use only name-based virtual hosts so the server doesn’t need to worry about<br>＃ IP addresses. This is indicated by the asterisks in the directives below.<br>＃<br>＃ Please see the documentation at<br>＃ <a href="URL:http://httpd.apache.org/docs-2.0/vhosts/">URL:http://httpd.apache.org/docs-2.0/vhosts/</a><br>＃ for further details before you try to setup virtual hosts.<br>＃<br>＃ You may use the command line option ‘-S’ to verify your virtual host<br>＃ configuration.</p>
<p>＃<br>＃ Use name-based virtual hosting.<br>//指令监听本地计算机上所有的IP地址请求<br>＃NameVirtualHost *</p>
<p>＃<br>＃ VirtualHost example:<br>＃ Almost any Apache directive may go into a VirtualHost container.<br>＃ The first VirtualHost section is used for requests without a known<br>＃ server name.<br>＃<br>＃&lt;VirtualHost *&gt;<br>//定义虚拟主机的设置，此设置将覆盖前面有的的相同指令<br>＃   ServerAdmin webmaster at dummy-host dot example.com<br>＃   DocumentRoot /www/docs/dummy-host.example.com<br>＃   ServerName dummy-host.example.com<br>＃   ErrorLog logs/dummy-host.example.com-error_log<br>＃   CustomLog logs/dummy-host.example.com-access_log common<br>＃</VirtualHost><br>//设置浏览器匹配<br>BrowserMatch “Mozilla/2” nokeepalive<br>BrowserMatch “MSIE 4.0b2;” nokeepalive downgrade-1.0 force-response-1.0<br>BrowserMatch “RealPlayer 4.0” force-response-1.0<br>BrowserMatch “Java/1.0” force-response-1.0<br>BrowserMatch “JDK/1.0” force-response-1.0<br>BrowserMatch “Microsoft Data Access Internet Publishing Provider” redirect-carefully<br>BrowserMatch “^WebDrive” redirect-carefully</p>
<p>＃<br>＃ Allow server status reports, with the URL of <a target="_blank" rel="noopener" href="http://servername/server-status">http://servername/server-status</a><br>＃ Change the “.your-domain.com” to match your domain to enable.<br>＃<br>＃&lt;Location /server-status&gt;<br>＃   SetHandler server-status<br>＃   Order deny,allow<br>＃   Deny from all<br>＃   Allow from .your-domain.com<br>＃</Location></p>
<p>＃<br>＃ Allow remote server configuration reports, with the URL of<br>＃ <a target="_blank" rel="noopener" href="http://servername/server-info">http://servername/server-info</a> (requires that mod_info.c be loaded).<br>＃ Change the “.your-domain.com” to match your domain to enable.<br>＃<br>＃&lt;Location /server-info&gt;<br>＃   SetHandler server-info<br>＃   Order deny,allow<br>＃   Deny from all<br>＃   Allow from .your-domain.com<br>＃</Location></p>
<p>//设置APache为代理服务器<br>＃ Proxy Server directives. Uncomment the following lines to<br>＃ enable the proxy server:<br>＃<br>＃<IfModule mod_proxy.c><br>＃ProxyRequests On<br>＃<br>＃&lt;Proxy *&gt;<br>＃   Order deny,allow<br>＃   Deny from all<br>＃   Allow from .your-domain.com<br>＃</Proxy></p>
<p>＃<br>＃ Enable/disable the handling of HTTP/1.1 “Via:” headers.<br>＃ (“Full” adds the server version; “Block” removes all outgoing Via: headers)<br>＃ Set to one of: Off | On | Full | Block<br>＃<br>＃ProxyVia On</p>
<p>＃<br>＃ To enable the cache as well, edit and uncomment the following lines:<br>＃ (no cacheing without CacheRoot)<br>＃<br>＃CacheRoot “/etc/httpd/proxy”<br>＃CacheSize 5<br>＃CacheGcInterval 4<br>＃CacheMaxExpire 24<br>＃CacheLastModifiedFactor 0.1<br>＃CacheDefaultExpire 1<br>＃NoCache a-domain.com another-domain.edu joes.garage-sale.com</p>
<p>＃</IfModule><br>＃ End of proxy directives.</p>
<p>//设置虚拟主机<br>＃＃＃ Section 3: Virtual Hosts<br>＃<br>＃ VirtualHost: If you want to maintain multiple domains/hostnames on your<br>＃ machine you can setup VirtualHost containers for them. Most configurations<br>＃ use only name-based virtual hosts so the server doesn’t need to worry about<br>＃ IP addresses. This is indicated by the asterisks in the directives below.<br>＃<br>＃ Please see the documentation at<br>＃ <a href="URL:http://httpd.apache.org/docs-2.0/vhosts/">URL:http://httpd.apache.org/docs-2.0/vhosts/</a><br>＃ for further details before you try to setup virtual hosts.<br>＃<br>＃ You may use the command line option ‘-S’ to verify your virtual host<br>＃ configuration.</p>
<p>＃<br>＃ Use name-based virtual hosting.<br>//指令监听本地计算机上所有的IP地址请求<br>＃NameVirtualHost *</p>
<p>＃<br>＃ VirtualHost example:<br>＃ Almost any Apache directive may go into a VirtualHost container.<br>＃ The first VirtualHost section is used for requests without a known<br>＃ server name.<br>＃<br>＃&lt;VirtualHost *&gt;<br>//定义虚拟主机的设置，此设置将覆盖前面有的的相同指令<br>＃   ServerAdmin webmaster at dummy-host dot example.com<br>＃   DocumentRoot /www/docs/dummy-host.example.com<br>＃   ServerName dummy-host.example.com<br>＃   ErrorLog logs/dummy-host.example.com-error_log<br>＃   CustomLog logs/dummy-host.example.com-access_log common<br>＃</VirtualHost></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moqiang02.github.io/2013/09/27/Apache-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/" data-id="cla0v65sf006ng0v11nvo8pxs" data-title="Apache 配置文件详解" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2013/09/29/apache%E4%B8%A4%E7%A7%8D%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          apache两种工作模式详解
        
      </div>
    </a>
  
  
    <a href="/2013/09/19/Apache%E4%B8%8B%E7%A6%81%E6%AD%A2%E4%BD%BF%E7%94%A8IP%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AE%E6%9C%AC%E7%AB%99%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">Apache下禁止使用IP直接访问本站的配置方法</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">255</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/apache/">apache</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github%E5%8D%9A%E5%AE%A2/">github博客</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">html+css</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iis/">iis</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">82</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">123</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kotlin/">kotlin</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">68</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mac/">mac</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/memcached/">memcached</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">74</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">41</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">185</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">44</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E5%AE%83/">其它</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><span class="category-list-count">51</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/">开源项目</a><span class="category-list-count">73</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/">生活随笔</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/">量化交易</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AndroidStudio/" style="font-size: 13.33px;">AndroidStudio</a> <a href="/tags/AndroidUI/" style="font-size: 20px;">AndroidUI</a> <a href="/tags/Android%E4%BA%8B%E4%BB%B6%E6%8B%A6%E6%88%AA/" style="font-size: 11.11px;">Android事件拦截</a> <a href="/tags/Android%E5%BC%80%E6%BA%90/" style="font-size: 17.22px;">Android开源</a> <a href="/tags/CI/" style="font-size: 15.56px;">CI</a> <a href="/tags/CURL/" style="font-size: 12.78px;">CURL</a> <a href="/tags/DEDE/" style="font-size: 17.78px;">DEDE</a> <a href="/tags/Docker/" style="font-size: 14.44px;">Docker</a> <a href="/tags/Flask/" style="font-size: 10.56px;">Flask</a> <a href="/tags/JavaSE/" style="font-size: 18.89px;">JavaSE</a> <a href="/tags/Laravel/" style="font-size: 17.22px;">Laravel</a> <a href="/tags/Maven/" style="font-size: 11.11px;">Maven</a> <a href="/tags/MybatisPlus/" style="font-size: 11.11px;">MybatisPlus</a> <a href="/tags/Puppeteer/" style="font-size: 15px;">Puppeteer</a> <a href="/tags/SVN/" style="font-size: 10px;">SVN</a> <a href="/tags/Selenium/" style="font-size: 11.67px;">Selenium</a> <a href="/tags/SpringBoot/" style="font-size: 19.44px;">SpringBoot</a> <a href="/tags/Thinkphp/" style="font-size: 10px;">Thinkphp</a> <a href="/tags/UEditor/" style="font-size: 11.67px;">UEditor</a> <a href="/tags/VMware/" style="font-size: 12.22px;">VMware</a> <a href="/tags/Vue/" style="font-size: 18.89px;">Vue</a> <a href="/tags/WebSocket/" style="font-size: 12.78px;">WebSocket</a> <a href="/tags/ecshop/" style="font-size: 14.44px;">ecshop</a> <a href="/tags/scrapy/" style="font-size: 13.89px;">scrapy</a> <a href="/tags/smarty/" style="font-size: 12.22px;">smarty</a> <a href="/tags/socket/" style="font-size: 14.44px;">socket</a> <a href="/tags/sphinx/" style="font-size: 11.67px;">sphinx</a> <a href="/tags/vagrant/" style="font-size: 12.22px;">vagrant</a> <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 11.11px;">微服务</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/" style="font-size: 15.56px;">数据传输</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 11.67px;">正则</a> <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 16.11px;">消息队列</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 18.33px;">爬虫</a> <a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 16.67px;">集群</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/03/11/%E5%A4%9A%E5%B1%82%E5%B5%8C%E5%A5%97%E7%9A%84div%E4%B8%94%E9%AB%98%E5%BA%A6%E9%83%BD%E4%B8%8D%E5%9B%BA%E5%AE%9A%EF%BC%8C%E8%AE%A9%E5%AD%90div%E5%86%85%E5%AE%B9%E6%BB%9A%E5%8A%A8/">多层嵌套的div且高度都不固定，让子div内容滚动</a>
          </li>
        
          <li>
            <a href="/2025/03/11/%E5%AD%90div%E5%A6%82%E4%BD%95%E5%8D%A0%E6%BB%A1%E7%88%B6div%E5%89%A9%E4%BD%99%E9%AB%98%E5%BA%A6/">子div如何占满父div剩余高度</a>
          </li>
        
          <li>
            <a href="/2024/08/07/el-input-%E5%90%84%E7%A7%8D%E8%BE%93%E5%85%A5%E9%99%90%E5%88%B6%E7%9A%84%E6%AD%A3%E5%88%99%E6%95%B4%E7%90%86/">el-input 各种输入限制的正则整理</a>
          </li>
        
          <li>
            <a href="/2024/08/07/el-input-number%E4%BF%AE%E6%94%B9%E6%95%B0%E5%80%BC%E5%A4%B1%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/">el-input-number修改数值失效的问题</a>
          </li>
        
          <li>
            <a href="/2024/05/21/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%94%A8-VuePress-GitHub-Pages-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">手把手教你用 VuePress + GitHub Pages 搭建个人博客</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 moqiang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>

<!-- rex -->

<script src="/js/toc.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>