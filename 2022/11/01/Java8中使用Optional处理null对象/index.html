<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Java8中使用Optional处理null对象(小豆丁技术栈) | 自强不息</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="一、Optional 简介Optional 是一个容器对象，可以存储对象、字符串等值，当然也可以存储 null 值。Optional 提供很多有用的方法，能帮助我们将 Java 中的对象等一些值存入其中，这样我们就不用显式进行空值检测，使我们能够用少量的代码完成复杂的流程。 比如它提供了：    of() 方法，可以将值存入 Optional 容器中，如果存入的值是 null 则抛异常。   of">
<meta property="og:type" content="article">
<meta property="og:title" content="Java8中使用Optional处理null对象(小豆丁技术栈)">
<meta property="og:url" content="http://moqiang02.github.io/2022/11/01/Java8%E4%B8%AD%E4%BD%BF%E7%94%A8Optional%E5%A4%84%E7%90%86null%E5%AF%B9%E8%B1%A1/index.html">
<meta property="og:site_name" content="自强不息">
<meta property="og:description" content="一、Optional 简介Optional 是一个容器对象，可以存储对象、字符串等值，当然也可以存储 null 值。Optional 提供很多有用的方法，能帮助我们将 Java 中的对象等一些值存入其中，这样我们就不用显式进行空值检测，使我们能够用少量的代码完成复杂的流程。 比如它提供了：    of() 方法，可以将值存入 Optional 容器中，如果存入的值是 null 则抛异常。   of">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://moqiang02.github.io/images/Java8%E4%B8%AD%E4%BD%BF%E7%94%A8Optional%E5%A4%84%E7%90%86null%E5%AF%B9%E8%B1%A1/1.png">
<meta property="article:published_time" content="2022-11-01T09:44:25.000Z">
<meta property="article:modified_time" content="2022-11-09T03:13:44.666Z">
<meta property="article:author" content="moqiang">
<meta property="article:tag" content="JavaSE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://moqiang02.github.io/images/Java8%E4%B8%AD%E4%BD%BF%E7%94%A8Optional%E5%A4%84%E7%90%86null%E5%AF%B9%E8%B1%A1/1.png">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">自强不息</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://moqiang02.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Java8中使用Optional处理null对象" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/11/01/Java8%E4%B8%AD%E4%BD%BF%E7%94%A8Optional%E5%A4%84%E7%90%86null%E5%AF%B9%E8%B1%A1/" class="article-date">
  <time class="dt-published" datetime="2022-11-01T09:44:25.000Z" itemprop="datePublished">2022-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Java8中使用Optional处理null对象(小豆丁技术栈)
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      

          <!-- rex -->
          
            <!-- 文章目录开始 -->
            
              <div id="toc" class="toc-article">
              <strong class="toc-title" style="cursor:pointer">目录</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Optional-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">一、Optional 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Optional-%E7%B1%BB%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">二、Optional 类描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Optional-%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.</span> <span class="toc-text">三、Optional 常用方法及使用示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95-Optional-of"><span class="toc-number">3.1.</span> <span class="toc-text">1、静态方法 Optional.of()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95-Optional-ofNullable"><span class="toc-number">3.2.</span> <span class="toc-text">2、静态方法 Optional.ofNullable()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-isPresent"><span class="toc-number">3.3.</span> <span class="toc-text">3、对象方法 isPresent()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-get"><span class="toc-number">3.4.</span> <span class="toc-text">4、对象方法 get()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-ifPresent"><span class="toc-number">3.5.</span> <span class="toc-text">5、对象方法 ifPresent()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-orElse"><span class="toc-number">3.6.</span> <span class="toc-text">6、对象方法 orElse()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-orElseGet"><span class="toc-number">3.7.</span> <span class="toc-text">7、对象方法 orElseGet()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-orElseThrow"><span class="toc-number">3.8.</span> <span class="toc-text">8、对象方法 orElseThrow()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-map"><span class="toc-number">3.9.</span> <span class="toc-text">9、对象方法 map()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-flatMap"><span class="toc-number">3.10.</span> <span class="toc-text">10、对象方法 flatMap()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95-filter"><span class="toc-number">3.11.</span> <span class="toc-text">11、对象方法 filter()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Optional-%E5%B8%B8%E7%94%A8%E7%A4%BA%E4%BE%8B%E7%BB%84%E5%90%88"><span class="toc-number">4.</span> <span class="toc-text">四、Optional 常用示例组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">4.1.</span> <span class="toc-text">对集合中的对象属性进行过滤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%88%A4%E7%A9%BA%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">4.2.</span> <span class="toc-text">嵌套判空的解决方案</span></a></li></ol></li></ol>
              </div>
            
            <!-- 文章目录结束 -->	  
          

        <h2 id="一、Optional-简介"><a href="#一、Optional-简介" class="headerlink" title="一、Optional 简介"></a>一、Optional 简介</h2><p>Optional 是一个容器对象，可以存储对象、字符串等值，当然也可以存储 null 值。Optional 提供很多有用的方法，能帮助我们将 Java 中的对象等一些值存入其中，这样我们就不用显式进行空值检测，使我们能够用少量的代码完成复杂的流程。</p>
<p>比如它提供了：</p>
<ul>
<li>  of() 方法，可以将值存入 Optional 容器中，如果存入的值是 null 则抛异常。</li>
<li>  ofNullable() 方法，可以将值存入 Optional 容器中，即使值是 null 也不会抛异常。</li>
<li>  get() 方法，可以获取容器中的值，如果值为 null 则抛出异常。</li>
<li>  getElse() 方法，可以获取容器中的值，如果值为 null 则返回设置的默认值。</li>
<li>  isPresent() 方法，该方法可以判断存入的值是否为空。</li>
<li>  …等等一些其它常用方法，下面会进行介绍。</li>
</ul>
<span id="more"></span>
<p>可以说，使用 Optional 可以帮助我们解决业务中，减少值动不动就抛出空指针异常问题，也减少 null 值的判断，提高代码可读性等，这里我们介绍下，如果使用这个 Optional 类。</p>
<p><img src="/images/Java8%E4%B8%AD%E4%BD%BF%E7%94%A8Optional%E5%A4%84%E7%90%86null%E5%AF%B9%E8%B1%A1/1.png"></p>
<h2 id="二、Optional-类描述"><a href="#二、Optional-类描述" class="headerlink" title="二、Optional 类描述"></a>二、Optional 类描述</h2><ul>
<li>  <strong>Optional 类所在包：</strong> java.util.Optional</li>
<li>  <strong>Optional 类声明：</strong> public final class Optional extends Object</li>
<li>  <strong>Optional 类方法：</strong></li>
</ul>
<p><code>public Optional filter(Predicate&lt;? super T&gt; predicate)</code></p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>修饰符、返回类型</th>
<th>方法描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>empty()</code></td>
<td><code>static &lt;T&gt; Optional&lt;T&gt;</code></td>
<td>方法描述</td>
</tr>
<tr>
<td><code>equals(Object obj)</code></td>
<td>boolean</td>
<td>判断其他对象是否等于 Optional。</td>
</tr>
<tr>
<td><code>filter(Predicate&lt;? super T&gt; predicate)</code></td>
<td><code>Optional&lt;T&gt;</code></td>
<td>如果有值并且满足断言条件返回包含该值的 Optional，否则返回空 Optional。</td>
</tr>
<tr>
<td><code>get()</code></td>
<td>T</td>
<td>如果在这个 Optional 中包含这个值则返回值，否则抛出 NoSuchElementException 异常。</td>
</tr>
<tr>
<td><code>hashCode()</code></td>
<td>int</td>
<td>返回存在值的哈希码，如果值不存在则返回 0。</td>
</tr>
<tr>
<td><code>ifPresent(Consumer&lt;? super T&gt; consumer)</code></td>
<td>void</td>
<td>如果值存在则使用该值调用 consumer , 否则不做任何事情。</td>
</tr>
<tr>
<td><code>isPresent()</code></td>
<td>boolean</td>
<td>如果值存在则方法会返回 true，否则返回 false。</td>
</tr>
<tr>
<td><code>flatMap(Function&lt;? super T,Optional&lt;U&gt;&gt; mapper</code>)</td>
<td><code>&lt;U&gt;Optional&lt;U&gt;</code></td>
<td>如果值存在，返回基于 Optional 包含的映射方法的值，否则返回一个空的 Optional。</td>
</tr>
<tr>
<td><code>map(Function&lt;? super T,? extends U&gt; mapper)</code></td>
<td><code>&lt;U&gt;Optional&lt;U&gt;</code></td>
<td>如果有值，则对其执行调用映射函数得到返回值。如果返回值不为 null，则创建包含映射返回值的 Optional 作为 map 方法返回值，否则返回空 Optional。</td>
</tr>
<tr>
<td><code>of(T value)</code></td>
<td><code>static &lt;T&gt; Optional&lt;T&gt;</code></td>
<td>返回一个指定非 null 值的 Optional。</td>
</tr>
<tr>
<td><code>ofNullable(T value)</code></td>
<td><code>static &lt;T&gt; Optional</code></td>
<td>果为非空，返回 Optional 描述的指定值，否则返回空的 Optional。</td>
</tr>
<tr>
<td><code>orElse(T other)</code></td>
<td>T</td>
<td>如果该值存在就直接返回， 否则返回指定的其它值。</td>
</tr>
<tr>
<td><code>orElseGet(Supplier&lt;? extends T&gt; other)</code></td>
<td>T</td>
<td>如果该值存在就返回值，否则触发 other，并返回 other 调用的结果。</td>
</tr>
<tr>
<td><code>orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code></td>
<td><code>&lt;X extends Throwable&gt; T</code></td>
<td>如果存在该值，返回包含的值，否则抛出由 Supplier 继承的异常。</td>
</tr>
<tr>
<td><code>toString()</code></td>
<td>String</td>
<td>返回一个 Optional 的非空字符串，用来调试。</td>
</tr>
</tbody></table>
<h2 id="三、Optional-常用方法及使用示例"><a href="#三、Optional-常用方法及使用示例" class="headerlink" title="三、Optional 常用方法及使用示例"></a>三、Optional 常用方法及使用示例</h2><h3 id="1、静态方法-Optional-of"><a href="#1、静态方法-Optional-of" class="headerlink" title="1、静态方法 Optional.of()"></a>1、静态方法 Optional.of()</h3><ul>
<li>  <strong>方法作用：</strong> 为指定的值创建一个指定非 null 值的 Optional。</li>
<li>  <strong>方法描述：</strong> of 方法通过工厂方法创建 Optional 实例，需要注意的是传入的参数不能为 null，否则抛出 NullPointerException。</li>
<li>  <strong>返回类型：</strong> Optional</li>
</ul>
<p><strong>示例代码：</strong><br>调用两个 Optional.of() 方法，一个传入正常参数，另一个传入 null 参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 传入正常值，正常返回一个 Optional 对象</span></span><br><span class="line">    Optional&lt;String&gt; optional1 = Optional.of(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 传入参数为 null，抛出 NullPointerException.</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.of(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java.lang.NullPointerException</span><br><span class="line">	at java.util.Objects.requireNonNull(Objects.java:203)</span><br><span class="line">	at java.util.Optional.&lt;init&gt;(Optional.java:96)</span><br><span class="line">	at java.util.Optional.of(Optional.java:108)</span><br><span class="line">	at club.mydlq.OptionalExample.main(OptionalExample.java:12)</span><br></pre></td></tr></table></figure>

<p>可以看到传入正常参数正常返回 Optional 对象，传入 null 参数返回 NullPointerException 异常。</p>
<h3 id="2、静态方法-Optional-ofNullable"><a href="#2、静态方法-Optional-ofNullable" class="headerlink" title="2、静态方法 Optional.ofNullable()"></a>2、静态方法 Optional.ofNullable()</h3><ul>
<li>  <strong>方法作用：</strong> 为指定的值创建一个 Optional 对象，如果指定的参数为 null，不抛出异常，直接则返回一个空的 Optional 对象。</li>
<li>  <strong>方法描述：</strong> ofNullable 方法是和 of 方式一样，都是用于创建 Optional 对象，只是传入的参数 null 时，会返回一个空的 Optional 对象，而不会抛出 NullPointerException 异常。</li>
<li>  <strong>返回类型：</strong> Optional</li>
</ul>
<p><strong>示例代码：</strong><br>调用 Optional.ofNullable() 方法，传入 null 参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 传入正常值，正常返回一个 Optional 对象</span></span><br><span class="line">    Optional&lt;String&gt; optional1 = Optional.ofNullable(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 传入 null 参数，正常返回 Optional 对象</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到正常传入值和传入 null 值时，都没有抛出异常。</p>
<h3 id="3、对象方法-isPresent"><a href="#3、对象方法-isPresent" class="headerlink" title="3、对象方法 isPresent()"></a>3、对象方法 isPresent()</h3><ul>
<li>  <strong>方法作用：</strong> 如果值存在则方法会返回 true，否则返回 false。</li>
<li>  <strong>方法描述：</strong> 该方法其实就是用于判断创建 Optional 时传入参数的值是否为空，实现代码就简单一行，即 <code>value != null</code> 所以如果不为空则返回 true，否则返回 false。</li>
<li>  <strong>返回类型：</strong> boolean</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 传入正常值，正常返回一个 Optional 对象，并使用 isPresent 方法</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional1</span> <span class="operator">=</span> Optional.ofNullable(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;传入正常值返回：&quot;</span> + optional1.isPresent());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传入参数为 null 生成一个 Optional 对象，并使用 isPresent 方法</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;传入 null 值返回：&quot;</span> + optional2.isPresent());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">传入正常值返回：<span class="literal">true</span></span><br><span class="line">传入 null 值返回：<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>可以看到传入正常参数时调用 Optional 对象的 isPresent 方法时返回 true，传入 null 参数返回 false。</p>
<h3 id="4、对象方法-get"><a href="#4、对象方法-get" class="headerlink" title="4、对象方法 get()"></a>4、对象方法 get()</h3><ul>
<li>  <strong>方法作用：</strong> 如果 Optional 有值则将其返回，否则抛出 NoSuchElementException 异常。</li>
<li>  <strong>方法描述：</strong> get 方法内部实现其实就是判断 Otpional 对象中的 value 属性是否为 null，如果是就抛出 NoSuchElementException 异常，否则返回这个 value 值。</li>
<li>  <strong>返回类型：</strong> T</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 传入正常值，正常返回一个 Optional 对象，并使用 get 方法获取值</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional1</span> <span class="operator">=</span> Optional.ofNullable(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">    System.out.println(optional1.get());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传入参数为 null 生成一个 Optional 对象，并使用 get 方法获取值</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line">    System.out.println(optional2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">传入正常参数：mydlq</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java.util.NoSuchElementException: No value present</span><br><span class="line">	at java.util.Optional.get(Optional.java:135)</span><br><span class="line">	at club.mydlq.OptionalExample.main(OptionalExample.java:14)</span><br></pre></td></tr></table></figure>

<p>可以观察到传入正常值的 Optional 调用 get 方法正常输出值，通过空的 optional 对象使用 get 方法获取值时，抛出 NoSuchElementException 异常：</p>
<h3 id="5、对象方法-ifPresent"><a href="#5、对象方法-ifPresent" class="headerlink" title="5、对象方法 ifPresent()"></a>5、对象方法 ifPresent()</h3><ul>
<li>  <strong>方法作用：</strong> 如果值存在则使用该值调用 consumer , 否则不做任何事情。</li>
<li>  <strong>方法描述：</strong> 该方法 <code>ifPresent(Consumer&lt;? super T&gt; consumer)</code> 中参数接收的是 Consumer 类，它包含一个接口方法 accept()，该方法能够对传入的值进行处理，但不会返回结果。这里传入参数可以传入 Lamdda 表达式或 Consumer 对象及实现 Consumer 接口的类的对象。</li>
<li>  <strong>返回类型：</strong> void</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建 Optional 对象，然后调用 Optional 对象的 ifPresent 方法，传入 Lambda 表达式</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional1</span> <span class="operator">=</span> Optional.ofNullable(<span class="string">&quot;mydlq1&quot;</span>);</span><br><span class="line">    optional1.ifPresent((value) -&gt; System.out.println(<span class="string">&quot;Optional 的值为：&quot;</span> + value));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建 Optional 对象，调用 Optional 对象的 ifPresent 方法，传入实现 Consumer 匿名内部类</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.ofNullable(<span class="string">&quot;mydlq2&quot;</span>);</span><br><span class="line">    Consumer&lt;String&gt; consumer = <span class="keyword">new</span> <span class="title class_">Consumer</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(Object value)</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Optional 的值为：&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    optional2.ifPresent(consumer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional 的值为：mydlq1</span><br><span class="line">Optional 的值为：mydlq2</span><br></pre></td></tr></table></figure>

<p>可以观察到，调用 ifPresent 使用 lambda 或者内部匿名类方法，都是为了再执行 Optional 对象的 ifPresent 方法时，执行一段代码逻辑。</p>
<h3 id="6、对象方法-orElse"><a href="#6、对象方法-orElse" class="headerlink" title="6、对象方法 orElse()"></a>6、对象方法 orElse()</h3><ul>
<li>  <strong>方法作用：</strong> 如果该值存在就直接返回， 否则返回指定的其它值。</li>
<li>  <strong>方法描述：</strong> orElse 方法实现很简单，就是使用三目表达式对传入的参数值进行 null 验证，即 <code>value != null ? value : other;</code> 如果为 null 则返回 true，否则返回 false。</li>
<li>  <strong>返回类型：</strong> T</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     <span class="comment">// 传入正常参数，获取一个 Optional 对象，并使用 orElse 方法设置默认值</span></span><br><span class="line">     <span class="type">Optional</span> <span class="variable">optional1</span> <span class="operator">=</span> Optional.ofNullable(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">     <span class="type">Object</span> <span class="variable">object1</span> <span class="operator">=</span> optional1.orElse(<span class="string">&quot;默认值&quot;</span>);</span><br><span class="line">     System.out.println(<span class="string">&quot;如果值不为空：&quot;</span>+object1);</span><br><span class="line"> </span><br><span class="line">     <span class="comment">// 传入 null 参数，获取一个 Optional 对象，并使用 orElse 方法设置默认值</span></span><br><span class="line">     <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line">     <span class="type">Object</span> <span class="variable">object2</span> <span class="operator">=</span> optional2.orElse(<span class="string">&quot;默认值&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;如果值为空：&quot;</span>+object2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果值不为空：mydlq</span><br><span class="line">如果值为空：默认值</span><br></pre></td></tr></table></figure>

<p>可以观察到，如果 Optional 的值为空，则返回 orElse() 方法设置的默认值，否则返回 Optional 中的值。</p>
<h3 id="7、对象方法-orElseGet"><a href="#7、对象方法-orElseGet" class="headerlink" title="7、对象方法 orElseGet()"></a>7、对象方法 orElseGet()</h3><ul>
<li>  <strong>方法作用：</strong> 如果该值存在就返回值，否则触发 other，并返回 other 调用的结果。</li>
<li>  <strong>方法描述：</strong> orElseGet 方法和 orElse 方法类似，都是在 Optional 值为空时，返回一个默认操作，只不过 orElse 返回的是默认值，而 orElseGet 是执行 lambda 表达式，然后返回 lambda 表达式执行后的结果。</li>
<li>  <strong>返回类型：</strong> T</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     <span class="comment">// 传入正常参数，获取一个 Optional 对象，并使用 orElse 方法设置默认值</span></span><br><span class="line">     <span class="type">Optional</span> <span class="variable">optional1</span> <span class="operator">=</span> Optional.ofNullable(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">     <span class="type">Object</span> <span class="variable">object1</span> <span class="operator">=</span> optional1.orElseGet(() -&gt; &#123;</span><br><span class="line">         <span class="type">String</span> <span class="variable">defaultVal</span> <span class="operator">=</span> <span class="string">&quot;执行逻辑和生成的默认值&quot;</span>;</span><br><span class="line">         <span class="keyword">return</span> defaultVal;</span><br><span class="line">     &#125;);</span><br><span class="line">     System.out.println(<span class="string">&quot;输出的值为：&quot;</span>+object1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传入 null 参数，获取一个 Optional 对象，并使用 orElse 方法设置默认值</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">object2</span> <span class="operator">=</span> optional2.orElseGet(() -&gt; &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">defaultVal</span> <span class="operator">=</span> <span class="string">&quot;执行逻辑和生成的默认值&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> defaultVal;</span><br><span class="line">    &#125;);</span><br><span class="line">    System.out.println(<span class="string">&quot;输出的值为：&quot;</span>+object2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输出的值为：mydlq</span><br><span class="line">输出的值为：执行逻辑和生成的默认值</span><br></pre></td></tr></table></figure>

<p>可也观察到，当 Optional 值为不为空时正常返回带值的 Optional，如果 Optional 为空则返回 orElseGet 方法中 lambda 表达式执行后生成的值。</p>
<h3 id="8、对象方法-orElseThrow"><a href="#8、对象方法-orElseThrow" class="headerlink" title="8、对象方法 orElseThrow()"></a>8、对象方法 orElseThrow()</h3><ul>
<li>  <strong>方法作用：</strong> 如果 Optional 存在该值，返回包含的值，否则抛出由 Supplier 继承的异常。</li>
<li>  <strong>方法描述：</strong> orElseThrow 方法其实就是判断创建 Optional 时传入的参数是否为 null，如果是非 null 则返回传入的值，否则抛出 异常。</li>
<li>  <strong>返回类型：</strong> T</li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 传入正常参数，获取一个 Optional 对象，并使用 orElseThrow 方法</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">Optional</span> <span class="variable">optional1</span> <span class="operator">=</span> Optional.ofNullable(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">object1</span> <span class="operator">=</span> optional1.orElseThrow(() -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;执行逻辑，然后抛出异常&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;抛出异常&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        System.out.println(<span class="string">&quot;输出的值为：&quot;</span> + object1);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">        throwable.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 传入 null 参数，获取一个 Optional 对象，并使用 orElseThrow 方法</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">object2</span> <span class="operator">=</span> optional2.orElseThrow(() -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;执行逻辑，然后抛出异常&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;抛出异常&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        System.out.println(<span class="string">&quot;输出的值为：&quot;</span> + object2);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">        throwable.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">值为不为空输出的值：mydlq</span><br><span class="line">执行逻辑，然后抛出异常</span><br><span class="line">java.lang.RuntimeException: 抛出异常</span><br><span class="line">	at club.mydlq.OptionalExample.lambda$main<span class="variable">$1</span>(OptionalExample.java:25)</span><br><span class="line">	at java.util.Optional.orElseThrow(Optional.java:290)</span><br><span class="line">	at club.mydlq.OptionalExample.main(OptionalExample.java:23)</span><br></pre></td></tr></table></figure>

<p>可以观察到，当创建 Optional 时如果传入的参数为空则执行 Lambda 表达式代码逻辑后抛出异常信息，否则返回传入的参数值。</p>
<h3 id="9、对象方法-map"><a href="#9、对象方法-map" class="headerlink" title="9、对象方法 map()"></a>9、对象方法 map()</h3><ul>
<li>  <strong>方法作用：</strong> 如果有值，则对其执行调用映射函数得到返回值。如果返回值不为 null，则创建包含映射返回值的 Optional 作为 map 方法返回值，否则返回空 Optional。</li>
<li>  <strong>方法描述：</strong> map 方法主要用于获取某个对象中的某个属性值的 Optional 对象时使用。map 方法调用时，首先验证传入的映射函数是否为空，如果为空则抛出异常。然后，再检测 Optional 的 value 是否为空，如果是，则返回一个空 value 的 Optional 对象。如果传入的映射函数和 Optinal 的 value 都不为空，则返回一个带 value 对象属性的 Optional 对象。</li>
<li>  <strong>返回类型：</strong> <code>Optional&lt;U&gt;</code></li>
</ul>
<p><strong>示例代码：</strong></p>
<p><strong>示例1：</strong> 创建 Map 集合，存储一些键值对信息，通过 Optional 操作 Map 获取值，然后观察：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建 map 对象</span></span><br><span class="line">    Map&lt;String, String&gt; userMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    userMap.put(<span class="string">&quot;name1&quot;</span>, <span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">    userMap.put(<span class="string">&quot;name2&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传入 Map 对象参数，获取一个 Optional 对象，获取 name1 属性</span></span><br><span class="line">    Optional&lt;String&gt; optional1 = Optional.of(userMap).map(value -&gt; value.get(<span class="string">&quot;name1&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传入 Map 对象参数，获取一个 Optional 对象，获取 name2 属性</span></span><br><span class="line">    Optional&lt;String&gt; optional2 = Optional.of(userMap).map(value -&gt; value.get(<span class="string">&quot;name2&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取 Optional 的值</span></span><br><span class="line">    System.out.println(<span class="string">&quot;获取的 name1 的值：&quot;</span> + optional1.orElse(<span class="string">&quot;默认值&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;获取的 name2 的值：&quot;</span> + optional2.orElse(<span class="string">&quot;默认值&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">获取的 Optional 的值：mydlq</span><br><span class="line">获取的 Optional 的值：默认值</span><br></pre></td></tr></table></figure>

<p><strong>示例2：</strong> 创建一个用户类，使用 Optional 操作用户对象，获取其 name 参数，结合 Optional 的 map 方法获取值，进行观察：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 Optional 的 map 方法对值处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建一个对象，设置姓名属性而不设置性别，这时候性别为 null</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;测试名称&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 Optional 存储 User 对象</span></span><br><span class="line">    Optional&lt;User&gt; optional1 = Optional.ofNullable(user1);</span><br><span class="line">    Optional&lt;User&gt; optional2 = Optional.ofNullable(user2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取对象的 name 属性值</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name1</span> <span class="operator">=</span> optional1.map(User::getName).orElse(<span class="string">&quot;未填写&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">name2</span> <span class="operator">=</span> optional2.map(User::getName).orElse(<span class="string">&quot;未填写&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出结果</span></span><br><span class="line">    System.out.println(<span class="string">&quot;获取的名称：&quot;</span> + name1);</span><br><span class="line">    System.out.println(<span class="string">&quot;获取的名称：&quot;</span> + name2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">获取的名称：测试名称</span><br><span class="line">获取的名称：未填写</span><br></pre></td></tr></table></figure>

<p><strong>总结：</strong></p>
<p>通过上面两个示例观察到，通过 Optional 对象的 map 方法能够获取映射对象中的属，创建 Optional 对象，并以此属性充当 Optional 的值，结合 orElse 方法，如果获取的属性的值为空，则设置个默认值。</p>
<h3 id="10、对象方法-flatMap"><a href="#10、对象方法-flatMap" class="headerlink" title="10、对象方法 flatMap()"></a>10、对象方法 flatMap()</h3><ul>
<li>  <strong>方法作用：</strong> 如果值存在，返回基于 Optional 包含的映射方法的值，否则返回一个空的 Optional。</li>
<li>  <strong>方法描述：</strong> flatMap 方法和 map 方法类似，唯一的不同点就是 map 方法会对返回的值进行 Optional 封装，而 flatMap 不会，它需要手动执行 Optional.of 或 Optional.ofNullable 方法对 Optional 值进行封装。</li>
<li>  <strong>返回类型：</strong> <code>Optional&lt;U&gt;</code></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建 map 对象</span></span><br><span class="line">    Map&lt;String, String&gt; userMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    userMap.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">    userMap.put(<span class="string">&quot;sex&quot;</span>, <span class="string">&quot;男&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 传入 Map 对象参数，获取一个 Optional 对象</span></span><br><span class="line">    Optional&lt;Map&lt;String, String&gt;&gt; optional1 = Optional.of(userMap);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 Optional 的 flatMap 方法，获取 Map 中的 name 属性</span></span><br><span class="line">    <span class="comment">// 然后通过获取的值手动创建一个新的 Optional 对象</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span> optional1.flatMap(value -&gt; Optional.ofNullable(value.get(<span class="string">&quot;name&quot;</span>)));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取 Optional 的 value</span></span><br><span class="line">    System.out.println(<span class="string">&quot;获取的 Optional 的值：&quot;</span> + optional2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">获取的 Optional 的值：mydlq</span><br></pre></td></tr></table></figure>

<p>根据结果观察，可以看到 flatMap 和 map 方法没有什么区别，但是仔细看，代码中调用 flatMap 后，需要手动执行 of 或 ofNullable 方法创建了 Optional 对象。</p>
<h3 id="11、对象方法-filter"><a href="#11、对象方法-filter" class="headerlink" title="11、对象方法 filter()"></a>11、对象方法 filter()</h3><ul>
<li>  <strong>方法作用：</strong> 如果有值并且满足断言条件返回包含该值的 Optional，否则返回空 Optional。</li>
<li>  <strong>方法描述：</strong> filter 方法通过传入的限定条件对 Optional 实例的值进行过滤，如果 Optional 值不为空且满足限定条件就返回包含值的 Optional，否则返回空的 Optional。这里设置的限定条件需要使用实现了 Predicate 接口的 lambda 表达式来进行配置。</li>
<li>  <strong>返回类型：</strong> <code>Optional&lt;T&gt;</code></li>
</ul>
<p><strong>示例代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 创建一个测试的 Optional 对象</span></span><br><span class="line">    Optional&lt;String&gt; optional = Optional.ofNullable(<span class="string">&quot;mydlq&quot;</span>);</span><br><span class="line">    <span class="comment">// 调用 Optional 的 filter 方法，设置一个满足的条件，然后观察获取的 Optional 对象值是否为空</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional1</span> <span class="operator">=</span>optional.filter((value) -&gt; value.length() &gt; <span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;Optional 的值不为空：：&quot;</span> + optional.isPresent());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用 Optional 的 filter 方法，设置一个不满足的条件，然后观察获取的 Optional 对象值是否为空</span></span><br><span class="line">    <span class="type">Optional</span> <span class="variable">optional2</span> <span class="operator">=</span>optional.filter((value) -&gt; value.length() &lt;<span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;Optional 的值不为空：：&quot;</span> + optional2.isPresent());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行代码，可以观察到控制台输出内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Optional 的值不为空：<span class="literal">true</span></span><br><span class="line">Optional 的值不为空：<span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>根据结果可以观察到，可以通过 filter 设置一个条件来判断 Optional 的值，如果满足条件就返回带值的 Optional，否则返回空的 Optional。</p>
<h2 id="四、Optional-常用示例组合"><a href="#四、Optional-常用示例组合" class="headerlink" title="四、Optional 常用示例组合"></a>四、Optional 常用示例组合</h2><p>在介绍一栏中已经说过 Optional 是个容器，它可用保存类型的 T 的值，即使 T 为 null 也可以使用 Optional 存储，这样我就不用显示进行空值检测，防止空指针异常。</p>
<p>上面也介绍了 Optional 的各种方法，在实际使用中这些方法常常组合使用。且很多方法也常与 Lambda 表达式结合，获取我们想要的结果的值。</p>
<p>下面是常用的示例，可以作为参考：</p>
<h3 id="对集合中的对象属性进行过滤"><a href="#对集合中的对象属性进行过滤" class="headerlink" title="对集合中的对象属性进行过滤"></a>对集合中的对象属性进行过滤</h3><p>创建一个 User 对象实体类，里面包含 name 属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建一个使用 main 方法的类，创建几个 User 对象且设置不同的值，有的对象为 null 有的属性不设置，然后通过 Optional 获取 name 属性值加入集合，进行测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptionalExample</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试的 main 方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建一个测试的用户集合</span></span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建几个测试用户</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;efg&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将用户加入集合</span></span><br><span class="line">        userList.add(user1);</span><br><span class="line">        userList.add(user2);</span><br><span class="line">        userList.add(user3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建用于存储姓名的集合</span></span><br><span class="line">        List&lt;String&gt; nameList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        <span class="comment">// 循环用户列表获取用户信息，值获取不为空且用户以 a 开头的姓名，</span></span><br><span class="line">        <span class="comment">// 如果不符合条件就设置默认值，最后将符合条件的用户姓名加入姓名集合</span></span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            nameList.add(Optional.ofNullable(user).map(User::getName).filter(value -&gt; value.startsWith(<span class="string">&quot;a&quot;</span>)).orElse(<span class="string">&quot;未填写&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出名字集合中的值</span></span><br><span class="line">        System.out.println(<span class="string">&quot;通过 Optional 过滤的集合输出：&quot;</span>);</span><br><span class="line">        nameList.stream().forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出运行结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通过 Optional 过滤的集合输出：</span><br><span class="line">abc</span><br><span class="line">未填写</span><br><span class="line">未填写</span><br></pre></td></tr></table></figure>

<h3 id="嵌套判空的解决方案"><a href="#嵌套判空的解决方案" class="headerlink" title="嵌套判空的解决方案"></a>嵌套判空的解决方案</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.SneakyThrows;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * optional嵌套判空取值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AllArgsConstructor</span></span><br><span class="line">    <span class="meta">@NoArgsConstructor</span></span><br><span class="line">    <span class="meta">@Data</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String province;</span><br><span class="line">        <span class="keyword">private</span> String city;</span><br><span class="line">        <span class="keyword">private</span> String area;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 常规判空的方式获取area</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getArea1</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == user) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> user.getAddress();</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == address) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> address.getArea();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * optional获取area值,如果获取不到就抛异常</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getAreaIfNullThrowException</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">area</span> <span class="operator">=</span> Optional.ofNullable(user).map(u -&gt; u.getAddress()).map(ass -&gt; ass.getArea()).orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;sss&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> area;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * optional获取area值,如果获取不到就返回自己给定的默认值</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getAreaIfNullReturnDefault</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">area</span> <span class="operator">=</span> Optional.ofNullable(user).map(u -&gt; u.getAddress()).map(ass -&gt; ass.getArea()).orElse(<span class="string">&quot;上海&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> area;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 传null</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">area_1</span> <span class="operator">=</span> getAreaIfNullReturnDefault(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(area_1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 传user对象，但Address为空</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">area_2</span> <span class="operator">=</span> getAreaIfNullReturnDefault(<span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">        System.out.println(area_2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 传user，Address不为空，area有值</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>() &#123;&#123;</span><br><span class="line">            <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>() &#123;&#123;</span><br><span class="line">                setArea(<span class="string">&quot;广州&quot;</span>);</span><br><span class="line">            &#125;&#125;;</span><br><span class="line">            setAddress(address);</span><br><span class="line">        &#125;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">area_3</span> <span class="operator">=</span> getAreaIfNullReturnDefault(user);</span><br><span class="line">        System.out.println(area_3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// --------------------------------------------</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">// 传空参数:会报异常</span></span><br><span class="line">       <span class="comment">// String area_4 = getAreaIfNullThrowException(null);</span></span><br><span class="line">       <span class="comment">// System.out.println(area_4);</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">// 传没有设置area值的user:会报异常</span></span><br><span class="line">       <span class="comment">// String area_5 = getAreaIfNullThrowException(new User());</span></span><br><span class="line">       <span class="comment">// System.out.println(area_5);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 传设置了area值的user：可以正常取值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">area_6</span> <span class="operator">=</span> getAreaIfNullThrowException(user);</span><br><span class="line">        System.out.println(area_6);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 传user，Address不为空，area有值</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user_2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>() &#123;&#123;</span><br><span class="line">            <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>() &#123;&#123;</span><br><span class="line">            &#125;&#125;;</span><br><span class="line">            setAddress(address);</span><br><span class="line">        &#125;&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">area_66</span> <span class="operator">=</span> getAreaIfNullThrowException(user_2);</span><br><span class="line">        System.out.println(area_66);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过上面，可以观察到，使用 Optional 有时候可以很方便的过滤一些属性，而且它的方法可以通过链式调用，方法间相互组合使用，使我们用少量的代码就能完成复杂的逻辑。</p>
<blockquote>
<p>转自：<a target="_blank" rel="noopener" href="http://www.mydlq.club/article/88/">http://www.mydlq.club/article/88/</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moqiang02.github.io/2022/11/01/Java8%E4%B8%AD%E4%BD%BF%E7%94%A8Optional%E5%A4%84%E7%90%86null%E5%AF%B9%E8%B1%A1/" data-id="cla0v65vo00jag0v1a1elccmm" data-title="Java8中使用Optional处理null对象(小豆丁技术栈)" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaSE/" rel="tag">JavaSE</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/11/02/Java8%E4%B8%AD%E4%BD%BF%E7%94%A8Stream%E6%96%B9%E5%BC%8F%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          Java8中使用Stream方式处理数据(小豆丁技术栈)
        
      </div>
    </a>
  
  
    <a href="/2022/11/01/Java%E6%B3%9B%E5%9E%8B%E8%AF%A6%E8%A7%A3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">Java泛型详解</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">255</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/apache/">apache</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github%E5%8D%9A%E5%AE%A2/">github博客</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">html+css</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iis/">iis</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">84</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">124</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kotlin/">kotlin</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">68</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mac/">mac</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/memcached/">memcached</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">74</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">42</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">186</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">44</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E5%AE%83/">其它</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><span class="category-list-count">52</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/">开源项目</a><span class="category-list-count">73</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/">生活随笔</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/">量化交易</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AndroidStudio/" style="font-size: 13.16px;">AndroidStudio</a> <a href="/tags/AndroidUI/" style="font-size: 20px;">AndroidUI</a> <a href="/tags/Android%E4%BA%8B%E4%BB%B6%E6%8B%A6%E6%88%AA/" style="font-size: 11.05px;">Android事件拦截</a> <a href="/tags/Android%E5%BC%80%E6%BA%90/" style="font-size: 16.84px;">Android开源</a> <a href="/tags/CI/" style="font-size: 15.26px;">CI</a> <a href="/tags/CURL/" style="font-size: 12.63px;">CURL</a> <a href="/tags/DEDE/" style="font-size: 17.37px;">DEDE</a> <a href="/tags/Docker/" style="font-size: 14.21px;">Docker</a> <a href="/tags/Flask/" style="font-size: 10.53px;">Flask</a> <a href="/tags/JavaSE/" style="font-size: 18.42px;">JavaSE</a> <a href="/tags/Laravel/" style="font-size: 16.84px;">Laravel</a> <a href="/tags/Maven/" style="font-size: 11.58px;">Maven</a> <a href="/tags/MybatisPlus/" style="font-size: 11.05px;">MybatisPlus</a> <a href="/tags/Puppeteer/" style="font-size: 14.74px;">Puppeteer</a> <a href="/tags/SVN/" style="font-size: 10px;">SVN</a> <a href="/tags/Selenium/" style="font-size: 11.58px;">Selenium</a> <a href="/tags/SpringBoot/" style="font-size: 19.47px;">SpringBoot</a> <a href="/tags/Thinkphp/" style="font-size: 10.53px;">Thinkphp</a> <a href="/tags/UEditor/" style="font-size: 11.58px;">UEditor</a> <a href="/tags/VMware/" style="font-size: 12.11px;">VMware</a> <a href="/tags/Vue/" style="font-size: 18.95px;">Vue</a> <a href="/tags/WebSocket/" style="font-size: 12.63px;">WebSocket</a> <a href="/tags/ecshop/" style="font-size: 14.21px;">ecshop</a> <a href="/tags/scrapy/" style="font-size: 13.68px;">scrapy</a> <a href="/tags/smarty/" style="font-size: 12.11px;">smarty</a> <a href="/tags/socket/" style="font-size: 14.21px;">socket</a> <a href="/tags/sphinx/" style="font-size: 11.58px;">sphinx</a> <a href="/tags/vagrant/" style="font-size: 12.11px;">vagrant</a> <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 11.05px;">微服务</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/" style="font-size: 15.26px;">数据传输</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 11.58px;">正则</a> <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 15.79px;">消息队列</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 17.89px;">爬虫</a> <a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 16.32px;">集群</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/10/28/%E5%9C%A8git%E4%B8%BB%E5%88%86%E6%94%AF%E6%B8%85%E7%90%86%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A%E7%9A%84%E6%96%B9%E6%A1%88/">在git主分支清理代码注释的方案</a>
          </li>
        
          <li>
            <a href="/2025/10/21/ThinkPHP6-0%E9%83%A8%E7%BD%B2%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/">ThinkPHP6.0部署相关问题</a>
          </li>
        
          <li>
            <a href="/2025/08/27/%E5%88%A9%E7%94%A8Jenkins%E4%B8%8EDocker%E5%AE%9E%E7%8E%B0Spring-Boot%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E4%B9%8B%E9%81%93/">利用Jenkins与Docker实现Spring Boot项目的自动化部署之道</a>
          </li>
        
          <li>
            <a href="/2025/08/27/Nginx%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E4%B8%AD%E5%90%8E%E7%AB%AF%E8%8A%82%E7%82%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5/">Nginx负载均衡中后端节点服务器健康检查</a>
          </li>
        
          <li>
            <a href="/2025/06/19/%E5%BD%BB%E5%BA%95%E6%90%9E%E6%87%82Vue%E4%B8%AD%E7%9A%84Mixin%E6%B7%B7%E5%85%A5/">彻底搞懂Vue中的Mixin混入</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 moqiang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>

<!-- rex -->

<script src="/js/toc.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>