<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ConstraintLayout 全解析 | 自强不息</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="首先,ConstraintLayout是一个新的布局,它是直接继承自ViewGroup的,所以在兼容性方面是非常好的.官方称可以兼容到API 9.可以放心食用.">
<meta property="og:type" content="article">
<meta property="og:title" content="ConstraintLayout 全解析">
<meta property="og:url" content="http://moqiang02.github.io/2021/02/01/ConstraintLayout-%E5%85%A8%E8%A7%A3%E6%9E%90/index.html">
<meta property="og:site_name" content="自强不息">
<meta property="og:description" content="首先,ConstraintLayout是一个新的布局,它是直接继承自ViewGroup的,所以在兼容性方面是非常好的.官方称可以兼容到API 9.可以放心食用.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/1.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/2.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/3.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/4.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/5.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/6.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/7.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/8.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/9.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/10.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/11.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/12.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/13.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/14.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/15.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/16.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/17.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/18.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/19.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/20.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/21.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/22.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/23.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/24.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/25.jpg">
<meta property="og:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/26.jpg">
<meta property="article:published_time" content="2021-02-01T15:25:52.000Z">
<meta property="article:modified_time" content="2022-10-26T09:28:53.718Z">
<meta property="article:author" content="moqiang">
<meta property="article:tag" content="AndroidUI">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://moqiang02.github.io/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/1.jpg">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">自强不息</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://moqiang02.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-ConstraintLayout-全解析" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/01/ConstraintLayout-%E5%85%A8%E8%A7%A3%E6%9E%90/" class="article-date">
  <time class="dt-published" datetime="2021-02-01T15:25:52.000Z" itemprop="datePublished">2021-02-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      ConstraintLayout 全解析
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      

          <!-- rex -->
          
            <!-- 文章目录开始 -->
            
              <div id="toc" class="toc-article">
              <strong class="toc-title" style="cursor:pointer">目录</strong>
              <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81Relative-positioning"><span class="toc-number">1.</span> <span class="toc-text">一、Relative positioning</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%B8%8E%E7%88%B6%E4%BA%B2%E8%BE%B9%E7%BC%98%E5%AF%B9%E9%BD%90"><span class="toc-number">2.</span> <span class="toc-text">二、与父亲边缘对齐</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%B1%85%E4%B8%AD%E5%AF%B9%E9%BD%90"><span class="toc-number">3.</span> <span class="toc-text">三、居中对齐</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%BE%B9%E8%B7%9D"><span class="toc-number">4.</span> <span class="toc-text">四、边距</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bias-%E5%81%8F%E5%90%91%E6%9F%90%E4%B8%80%E8%BE%B9"><span class="toc-number">5.</span> <span class="toc-text">Bias(偏向某一边)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94%E3%80%81Circular-positioning-Added-in-1-1"><span class="toc-number">6.</span> <span class="toc-text">五、Circular positioning (Added in 1.1)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD%E3%80%81Visibility-behavior-%E5%8F%AF%E8%A7%81%E6%80%A7%E8%A1%8C%E4%B8%BA"><span class="toc-number">7.</span> <span class="toc-text">六、Visibility behavior 可见性行为</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%83%E3%80%81Dimensions-constraints-%E5%B0%BA%E5%AF%B8%E9%99%90%E5%88%B6"><span class="toc-number">8.</span> <span class="toc-text">七、Dimensions constraints 尺寸限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AB%E3%80%81Widgets-dimension-constraints-%E5%AE%BD%E9%AB%98%E7%BA%A6%E6%9D%9F"><span class="toc-number">9.</span> <span class="toc-text">八、Widgets dimension constraints 宽高约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B9%9D%E3%80%81WRAP-CONTENT%EF%BC%9A%E5%BC%BA%E5%88%B6%E7%BA%A6%E6%9D%9F%EF%BC%88%E5%9C%A81-1%E4%B8%AD%E6%B7%BB%E5%8A%A0%EF%BC%89"><span class="toc-number">10.</span> <span class="toc-text">九、WRAP_CONTENT：强制约束（在1.1中添加）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E3%80%81MATCH-CONSTRAINT%E5%B0%BA%E5%AF%B8%EF%BC%88%E5%9C%A81-1%E4%B8%AD%E6%B7%BB%E5%8A%A0%EF%BC%89"><span class="toc-number">11.</span> <span class="toc-text">十、MATCH_CONSTRAINT尺寸（在1.1中添加）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E6%8C%89%E6%AF%94%E4%BE%8B%E8%AE%BE%E7%BD%AE%E5%AE%BD%E9%AB%98-Ratio"><span class="toc-number">12.</span> <span class="toc-text">十一、按比例设置宽高(Ratio)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81Chains%EF%BC%88%E9%93%BE%EF%BC%89"><span class="toc-number">13.</span> <span class="toc-text">十二、Chains（链）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81Guideline"><span class="toc-number">14.</span> <span class="toc-text">十三、Guideline</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81Barrier"><span class="toc-number">15.</span> <span class="toc-text">十四、Barrier</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81Group"><span class="toc-number">16.</span> <span class="toc-text">十五、Group</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81%E4%BD%95%E4%B8%BA%E8%99%9A%E6%8B%9F%E8%A7%86%E5%9B%BE"><span class="toc-number">17.</span> <span class="toc-text">十六、何为虚拟视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E4%B8%83%E3%80%81Optimizer%E4%BC%98%E5%8C%96-add-in-1-1"><span class="toc-number">18.</span> <span class="toc-text">十七、Optimizer优化(add in 1.1)</span></a></li></ol>
              </div>
            
            <!-- 文章目录结束 -->	  
          

        <p>首先,ConstraintLayout是一个新的布局,它是直接继承自ViewGroup的,所以在兼容性方面是非常好的.官方称可以兼容到API 9.可以放心食用.<span id="more"></span></p>
<h4 id="一、Relative-positioning"><a href="#一、Relative-positioning" class="headerlink" title="一、Relative positioning"></a>一、Relative positioning</h4><p>先来看看下面一段简单示例:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/1.jpg"></p>
<p>上面有一个简单的属性:<code>layout_constraintLeft_toRightOf</code>,表示将按钮2放到按钮1的左边.如果没有这一句属性,那么两个按钮会重叠在一起,就像FrameLayout.</p>
<p>像这样的属性还有很多:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintLeft_toLeftOf  我的左侧与你的左侧对齐</span><br><span class="line">layout_constraintLeft_toRightOf  我的左侧与你的右侧对齐</span><br><span class="line">layout_constraintRight_toLeftOf 我的右侧与你的左侧对齐</span><br><span class="line">layout_constraintRight_toRightOf 我的右侧与你的右侧对齐</span><br><span class="line">layout_constraintTop_toTopOf 我的顶部与你的顶部对齐</span><br><span class="line">layout_constraintTop_toBottomOf 我的顶部与你的底部对齐 (相当于我在你下面)</span><br><span class="line">layout_constraintBottom_toTopOf</span><br><span class="line">layout_constraintBottom_toBottomOf</span><br><span class="line">layout_constraintBaseline_toBaselineOf 基线对齐</span><br><span class="line">layout_constraintStart_toEndOf 我的左侧与你的右侧对齐</span><br><span class="line">layout_constraintStart_toStartOf</span><br><span class="line">layout_constraintEnd_toStartOf</span><br><span class="line">layout_constraintEnd_toEndOf</span><br></pre></td></tr></table></figure>

<p>上面的属性都非常好理解,除了一个相对陌生的<code>layout_constraintBaseline_toBaselineOf</code>基线对齐.咱们上代码:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintBaseline_toBaselineOf</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/btn1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/2.jpg"></p>
<p>一目了然,相当于文字的基线是对齐了的.如果没有加<code>layout_constraintBaseline_toBaselineOf</code>属性,那么是下面这样的:</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/3.jpg"></p>
<h4 id="二、与父亲边缘对齐"><a href="#二、与父亲边缘对齐" class="headerlink" title="二、与父亲边缘对齐"></a>二、与父亲边缘对齐</h4><p>当需要子view放在父view的底部或者最右侧时. 我们使用:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/4.jpg"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constraintBottom_toBottomOf=&quot;parent&quot;  我的底部与父亲底部对齐</span><br><span class="line">app:layout_constraintTop_toTopOf=&quot;parent&quot;   我的顶部与父亲的顶部对齐</span><br><span class="line">app:layout_constraintLeft_toLeftOf=&quot;parent&quot;  我的左侧与父亲的左侧对齐</span><br><span class="line">app:layout_constraintRight_toRightOf=&quot;parent&quot;  我的右侧与父亲的右侧对齐</span><br></pre></td></tr></table></figure>

<h4 id="三、居中对齐"><a href="#三、居中对齐" class="headerlink" title="三、居中对齐"></a>三、居中对齐</h4><p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/5.jpg"></p>
<p>下面的TextView,与父亲左侧对齐,与父亲右侧对齐,所以,最右,它水平居中对齐.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/6.jpg"></p>
<p>可能你也想到了,居中对齐其实就是2个对齐方式相结合.最后产生的效果. 比如:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是垂直居中</span><br><span class="line">app:layout_constraintTop_toTopOf=&quot;parent&quot;</span><br><span class="line">app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">位于父亲的正中央</span><br><span class="line">app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</span><br><span class="line">app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">app:layout_constraintRight_toRightOf=&quot;parent&quot;</span><br><span class="line">app:layout_constraintTop_toTopOf=&quot;parent&quot;</span><br></pre></td></tr></table></figure>

<h4 id="四、边距"><a href="#四、边距" class="headerlink" title="四、边距"></a>四、边距</h4><p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/7.jpg"></p>
<p>边距和原来是一样的.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">android:layout_marginStart</span><br><span class="line">android:layout_marginEnd</span><br><span class="line">android:layout_marginLeft</span><br><span class="line">android:layout_marginTop</span><br><span class="line">android:layout_marginRight</span><br><span class="line">android:layout_marginBottom</span><br></pre></td></tr></table></figure>

<p>举个例子:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/btn1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下:</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/8.jpg"></p>
<h4 id="Bias-偏向某一边"><a href="#Bias-偏向某一边" class="headerlink" title="Bias(偏向某一边)"></a>Bias(偏向某一边)</h4><p>上面的水平居中,是使用的与父亲左侧对齐+与父亲右侧对齐. 可以理解为左右的有一种约束力,默认情况下,左右的力度是一样大的,那么view就居中了.</p>
<p>当左侧的力度大一些时,view就会偏向左侧.就像下面这样.</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/9.jpg"></p>
<p>当我们需要改变这种约束力的时候,需要用到如下属性:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintHorizontal_bias  水平约束力</span><br><span class="line">layout_constraintVertical_bias  垂直约束力</span><br></pre></td></tr></table></figure>

<p>来举个例子:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/10.jpg"></p>
<p>可以看到,左右有2根约束线.左侧短一些.那么就偏向于左侧</p>
<h4 id="五、Circular-positioning-Added-in-1-1"><a href="#五、Circular-positioning-Added-in-1-1" class="headerlink" title="五、Circular positioning (Added in 1.1)"></a>五、Circular positioning (Added in 1.1)</h4><blockquote>
<p>翻译为:圆形的定位 ?</p>
</blockquote>
<p>这个就比较牛逼了,可以以角度和距离约束某个view中心相对于另一个view的中心,</p>
<p>可能比较抽象,来看看谷歌画的图:</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/11.jpg"></p>
<p>他的属性有:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintCircle ：引用另一个小部件ID</span><br><span class="line">layout_constraintCircleRadius ：到其他小部件中心的距离</span><br><span class="line">layout_constraintCircleAngle ：小部件应该处于哪个角度（以度为单位，从0到360）</span><br></pre></td></tr></table></figure>

<p>举个例子:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintCircle</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintCircleRadius</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintCircleAngle</span>=<span class="string">&quot;145&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/12.jpg"></p>
<h4 id="六、Visibility-behavior-可见性行为"><a href="#六、Visibility-behavior-可见性行为" class="headerlink" title="六、Visibility behavior 可见性行为"></a>六、Visibility behavior 可见性行为</h4><p>当一个View在ConstraintLayout中被设置为gone,那么你可以把它当做一个点(这个view所有的margin都将失效). 这个点是假设是实际存在的.</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/13.jpg"></p>
<p>举个例子:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;26sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/btn1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/btn2&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/14.jpg"></p>
<p>可以看到,按钮3和按钮1中间的margin只有20.</p>
<p>再举个例子:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@+id/btn2&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>我将按钮3放到按钮2的右侧,这时是没有给按钮2加<code>android:visibility=&quot;gone&quot;</code>的.</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/15.jpg"></p>
<p>现在我们来给按钮2加上<code>android:visibility=&quot;gone&quot;</code></p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/16.jpg"></p>
<p>这时,按钮2相当于缩小成一个点,那么按钮3还是在他的右侧不离不弃.</p>
<h4 id="七、Dimensions-constraints-尺寸限制"><a href="#七、Dimensions-constraints-尺寸限制" class="headerlink" title="七、Dimensions constraints 尺寸限制"></a>七、Dimensions constraints 尺寸限制</h4><p>在ConstraintLayout中,可以给一个view设置最小和最大尺寸.</p>
<p>属性如下(这些属性只有在给出的宽度或高度为wrap_content时才会生效):</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">android:minWidth 设置布局的最小宽度</span><br><span class="line">android:minHeight 设置布局的最小高度</span><br><span class="line">android:maxWidth 设置布局的最大宽度</span><br><span class="line">android:maxHeight 设置布局的最大高度</span><br></pre></td></tr></table></figure>

<h4 id="八、Widgets-dimension-constraints-宽高约束"><a href="#八、Widgets-dimension-constraints-宽高约束" class="headerlink" title="八、Widgets dimension constraints 宽高约束"></a>八、Widgets dimension constraints 宽高约束</h4><p>平时我们使用<code>android:layout_width和 android:layout_height</code>来指定view的宽和高.</p>
<p>在ConstraintLayout中也是一样,只不过多了一个0dp.</p>
<ul>
<li>  使用长度</li>
<li>  使用wrap_content，view计算自己的大小</li>
<li>  使用0dp，相当于“ MATCH_CONSTRAINT”</li>
</ul>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/17.jpg"></p>
<p>下面是例子</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/btn1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_marginStart</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/btn2&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>展示出来的是:</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/18.jpg"></p>
<h4 id="九、WRAP-CONTENT：强制约束（在1-1中添加）"><a href="#九、WRAP-CONTENT：强制约束（在1-1中添加）" class="headerlink" title="九、WRAP_CONTENT：强制约束（在1.1中添加）"></a>九、WRAP_CONTENT：强制约束（在1.1中添加）</h4><p>当一个view的宽或高,设置成wrap_content时,如果里面的内容实在特别宽的时候,他的约束会出现问题.我们来看一个小栗子:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;Q&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/19.jpg"></p>
<p>从右侧的图片可以看出,按钮2里面的内容确实是在按钮1的内容的右侧.但是按钮2整个来说,却是没有整个的在按钮1的右侧.</p>
<p>这时需要用到下面2个属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constrainedWidth=”true|false”</span><br><span class="line">app:layout_constrainedHeight=”true|false”</span><br></pre></td></tr></table></figure>

<p>给按钮2加一个<code>app:layout_constrainedWidth=&quot;true&quot;</code>,来看效果:</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/20.jpg"></p>
<p>哈哈,又看到了我们想要的效果.爽歪歪.</p>
<h4 id="十、MATCH-CONSTRAINT尺寸（在1-1中添加）"><a href="#十、MATCH-CONSTRAINT尺寸（在1-1中添加）" class="headerlink" title="十、MATCH_CONSTRAINT尺寸（在1.1中添加）"></a>十、MATCH_CONSTRAINT尺寸（在1.1中添加）</h4><p>当一个view的长宽设置为MATCH_CONSTRAINT(即0dp)时,默认是使该view占用所有的可用的空间. 这里有几个额外的属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintWidth_min和layout_constraintHeight_min：将设置此维度的最小大小</span><br><span class="line">layout_constraintWidth_max和layout_constraintHeight_max：将设置此维度的最大大小</span><br><span class="line">layout_constraintWidth_percent和layout_constraintHeight_percent：将此维度的大小设置为父级的百分比</span><br></pre></td></tr></table></figure>

<p>这里简单举个百分比的例子:居中并且view的宽是父亲的一半</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:text</span>=<span class="string">&quot;Q&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:layout_constraintWidth_percent</span>=<span class="string">&quot;0.5&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/21.jpg"></p>
<p>It’s so easy! 这极大的减少了我们的工作量.</p>
<p><strong>注意</strong></p>
<ul>
<li>  百分比布局是必须和MATCH_CONSTRAINT(0dp)一起使用</li>
<li>  <code>layout_constraintWidth_percent 或layout_constraintHeight_percent</code>属性设置为0到1之间的值</li>
</ul>
<h4 id="十一、按比例设置宽高-Ratio"><a href="#十一、按比例设置宽高-Ratio" class="headerlink" title="十一、按比例设置宽高(Ratio)"></a>十一、按比例设置宽高(Ratio)</h4><p>可以设置View的宽高比例,需要将至少一个约束维度设置为0dp（即<code>MATCH_CONSTRAINT</code>）,再设置<code>layout_constraintDimensionRatio</code>.</p>
<p>举例子:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintDimensionRatio</span>=<span class="string">&quot;16:9&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/22.jpg"></p>
<p>该比率可表示为：</p>
<ul>
<li>  浮点值，表示宽度和高度之间的比率</li>
<li>  “宽度：高度”形式的比率</li>
</ul>
<p>如果两个尺寸都设置为MATCH_CONSTRAINT（0dp），也可以使用比率。在这种情况下，系统设置满足所有约束的最大尺寸并保持指定的纵横比。要根据另一个特定边的尺寸限制一个特定边，可以预先附加W或H,分别约束宽度或高度。例如，如果一个尺寸受两个目标约束（例如，宽度为0dp且以父节点为中心），则可以指示应该约束哪一边，通过 在比率前添加字母W（用于约束宽度）或H（用于约束高度），用逗号分隔：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:layout_height</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:layout_constraintDimensionRatio</span>=<span class="string">&quot;H,16:9&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的代码将按照16：9的比例设置按钮的高度，而按钮的宽度将匹配父项的约束。</p>
<blockquote>
<p>比例分为三种情况：<br>1、w:0dp h:wrap_content/具体数值<br>此时默认是以h作为标准来约束w,”w,2:1”=”2:1”都是宽:高=2:1,若此时你写”h,2:1”则代表高:宽=2:1<br>2、w:wrap_content/具体数值 h:0dp<br>此时默认是以w作为标准来约束h,”h,2:1”=”2:1”都是宽:高=2:1,若此时你写”w,2:1”则代表高:宽=2:1<br>3、w:0dp h:0dp<br>此时默认是以w作为标准来约束h,”h,2:1”=”2:1”都是宽:高=2:1,若此时你写”w,2:1”则代表高:宽=2:1</p>
</blockquote>
<h4 id="十二、Chains（链）"><a href="#十二、Chains（链）" class="headerlink" title="十二、Chains（链）"></a>十二、Chains（链）</h4><p>设置属性layout_constraintHorizontal_chainStyle或layout_constraintVertical_chainStyle链的第一个元素时，链的行为将根据指定的样式（默认值CHAIN_SPREAD）更改。</p>
<ul>
<li>  CHAIN_SPREAD - 元素将展开（默认样式）</li>
<li>  CHAIN_SPREAD_INSIDE - 类似，但链的端点不会分散</li>
<li>  加权链接CHAIN_SPREAD模式，如果设置了一些小部件MATCH_CONSTRAINT，它们将分割可用空间</li>
<li>  CHAIN_PACKED - 链条的元素将被包装在一起。然后，子项的水平或垂直偏差属性将影响打包元素的定位</li>
</ul>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/23.jpg"></p>
<p>下面是一个类似LinearLayout的weight的效果,需要用到<code>layout_constraintHorizontal_weight</code>属性:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;A&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintHorizontal_chainStyle</span>=<span class="string">&quot;spread&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintHorizontal_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@id/btn3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintHorizontal_weight</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/btn1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;问问&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintHorizontal_weight</span>=<span class="string">&quot;3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@id/btn2&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>例子的效果图如下:</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/24.jpg"></p>
<h4 id="十三、Guideline"><a href="#十三、Guideline" class="headerlink" title="十三、Guideline"></a>十三、Guideline</h4><blockquote>
<p>这是一个虚拟视图</p>
</blockquote>
<p>Guideline可以创建相对于ConstraintLayout的水平或者垂直准线. 这根辅助线,有时候可以帮助我们定位.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layout_constraintGuide_begin   距离父亲起始位置的距离（左侧或顶部）</span><br><span class="line">layout_constraintGuide_end    距离父亲结束位置的距离（右侧或底部）</span><br><span class="line">layout_constraintGuide_percent    距离父亲宽度或高度的百分比(取值范围0-1)</span><br></pre></td></tr></table></figure>

<p>我们拿辅助线干嘛??? 比如有时候,可能会有这样的需求,有两个按钮,在屏幕中央一左一右. 如果是以前的话,我会搞一个LinearLayout,.然后将LinearLayout居中,然后按钮一左一右.</p>
<p>效果图如下:</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/25.jpg"></p>
<p>现在我们使用Guideline的话,就超级方便了,看代码:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--水平居中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Guideline</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/gl_center&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">&quot;0.5&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintEnd_toStartOf</span>=<span class="string">&quot;@id/gl_center&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@id/gl_center&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="十四、Barrier"><a href="#十四、Barrier" class="headerlink" title="十四、Barrier"></a>十四、Barrier</h4><blockquote>
<p>虚拟视图</p>
</blockquote>
<p>Barrier是一个类似于屏障的东西.它和Guideline比起来更加灵活.它可以用来约束多个view.</p>
<p>比如下面的姓名和联系方式,右侧的两个EditText是肯定需要左侧对齐的,左侧的2个TextView可以看成一个整体,Barrier会在最宽的那个TextView的右边,然后右侧的EditText在Barrier的右侧.</p>
<p><img src="/images/ConstraintLayout%E5%85%A8%E8%A7%A3%E6%9E%90/26.jpg"></p>
<p>Barrier有2个属性</p>
<ul>
<li>  <strong>barrierDirection</strong>，取值有top、bottom、left、right、start、end，用于控制 Barrier 相对于给定的 View 的位置。比如在上面的栗子中，Barrier 应该在 姓名TextView 的右侧，因此这里取值right（也可end，可随意使用.这个right和end的问题,其实在RelativeLayout中就有体现,在RelativeLayout中写left或者right时会给你一个警告,让你换成start和end）。</li>
<li>  <strong>constraint_referenced_ids</strong>，取值是要依赖的控件的id（不需要<code>@+id/</code>）。Barrier 将会使用ids中最大的一个的宽（高）作为自己的位置。</li>
</ul>
<p><strong>ps</strong>:这个东西有一个小坑,如果你写完代码,发现没什么问题,但是预览出来的效果却不是你想要的.这时,运行一下程序即可.然后预览就正常了,在手机上展示的也是正常的.</p>
<p>例子的代码如下(如果预览不正确,那么一定要运行一下,不要怀疑是自己代码写错了):</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_name&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;姓名:&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@id/tvTitleText&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_phone&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;联系方式:&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;@id/tvContentText&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/tv_name&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tvTitleText&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;null&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;张三&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/barrier2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/tvContentText&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;null&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;xxxxxxxxxxxxxxx&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">&quot;14sp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintStart_toEndOf</span>=<span class="string">&quot;@+id/barrier2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/tvTitleText&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Barrier</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/barrier2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:barrierDirection</span>=<span class="string">&quot;right&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;tv_name,tv_phone&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="十五、Group"><a href="#十五、Group" class="headerlink" title="十五、Group"></a>十五、Group</h4><blockquote>
<p>固定思议,这是一个组. 这也是一个虚拟视图.</p>
</blockquote>
<p>可以把View放到里面,然后Group可以同时控制这些view的隐藏.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Group</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:visibility</span>=<span class="string">&quot;gone&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;btn1,btn2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮1&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/btn2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;按钮2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/btn1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>  Group有一个属性<code>constraint_referenced_ids</code>,可以将那些需要同时隐藏的view丢进去.</li>
<li>  别将view放Group包起来.这样会报错,因为Group只是一个不执行onDraw()的View.</li>
<li>  使用多个 Group 时，尽量不要将某个View重复的放在 多个 Group 中，实测可能会导致隐藏失效.</li>
</ul>
<h4 id="十六、何为虚拟视图"><a href="#十六、何为虚拟视图" class="headerlink" title="十六、何为虚拟视图"></a>十六、何为虚拟视图</h4><p>上面我们列举的虚拟视图一共有:</p>
<ul>
<li>  Guideline</li>
<li>  Barrier</li>
<li>  Group</li>
</ul>
<blockquote>
<p>来我们看看源码</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//Guideline</span><br><span class="line"></span><br><span class="line">public class Guideline extends View &#123;</span><br><span class="line">public Guideline(Context context) &#123;</span><br><span class="line">    super(context);</span><br><span class="line">    //这个8是什么呢?</span><br><span class="line">    //public static final int GONE = 0x00000008;</span><br><span class="line">    //其实是View.GONE的值</span><br><span class="line">    super.setVisibility(8);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public Guideline(Context context, AttributeSet attrs) &#123;</span><br><span class="line">    super(context, attrs);</span><br><span class="line">    super.setVisibility(8);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public Guideline(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">    super(context, attrs, defStyleAttr);</span><br><span class="line">    super.setVisibility(8);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public Guideline(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123;</span><br><span class="line">    super(context, attrs, defStyleAttr);</span><br><span class="line">    super.setVisibility(8);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//可见性永远为GONE</span><br><span class="line">public void setVisibility(int visibility) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//没有绘画</span><br><span class="line">public void draw(Canvas canvas) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//大小永远为0</span><br><span class="line">protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">    this.setMeasuredDimension(0, 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们看到Guideline其实是一个普通的View,然后在构造函数里将自己设置为GONE</p>
<ul>
<li>  并且setVisibility()为空方法,该View就永远为GONE了.</li>
<li>  draw()方法为空,意思是不用去绘画.</li>
<li>  onMeasure()中将自己长宽设置成0.</li>
</ul>
<p>综上所述,我觉得这个Guideline就是一个不可见的且不用测量,不用绘制,那么我们就可以忽略其绘制消耗.</p>
<p>然后Barrier和Group都是继承自ConstraintHelper的,ConstraintHelper是一个View.ConstraintHelper的onDraw()和onMeasure()如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public void onDraw(Canvas canvas) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">    //mUseViewMeasure一直是false,在Group中用到了,但是还是将它置为false了.</span><br><span class="line">    if (this.mUseViewMeasure) &#123;</span><br><span class="line">        super.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        this.setMeasuredDimension(0, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>哈哈,其实是和Guideline一样的嘛,还是可以忽略其带来的性能消耗嘛.上面的mUseViewMeasure一直是false,所以长宽一直为0.</p>
<p>所以我们可以将Guideline,Barrier,Group视为虚拟试图,因为它们几乎不会带来多的绘制性能损耗.我是这样理解的.</p>
<h4 id="十七、Optimizer优化-add-in-1-1"><a href="#十七、Optimizer优化-add-in-1-1" class="headerlink" title="十七、Optimizer优化(add in 1.1)"></a>十七、Optimizer优化(add in 1.1)</h4><p>可以通过将标签app：layout_optimizationLevel元素添加到ConstraintLayout来决定应用哪些优化。这个我感觉还处于实验性的阶段,暂时先别用..哈哈</p>
<p>使用方式如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_optimizationLevel</span>=<span class="string">&quot;standard|dimensions|chains&quot;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>  none：不优化</li>
<li>  standard：默认,仅优化直接和障碍约束</li>
<li>  direct：优化直接约束</li>
<li>  barrier：优化障碍约束</li>
<li>  chain：优化链条约束</li>
<li>  dimensions: 优化维度测量，减少匹配约束元素的度量数量</li>
</ul>
<blockquote>
<p>转自：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903733948579847">ConstraintLayout 全解析</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://moqiang02.github.io/2021/02/01/ConstraintLayout-%E5%85%A8%E8%A7%A3%E6%9E%90/" data-id="cla0v65t3009qg0v10q2b5bkk" data-title="ConstraintLayout 全解析" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AndroidUI/" rel="tag">AndroidUI</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/02/05/Python%E5%A4%84%E7%90%86%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4Arrow%E5%BA%93/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          Python处理日期时间:Arrow库
        
      </div>
    </a>
  
  
    <a href="/2021/01/27/JWT%E5%9C%A8Flask%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">JWT在Flask中的应用</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">255</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/apache/">apache</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github%E5%8D%9A%E5%AE%A2/">github博客</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">html+css</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iis/">iis</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">55</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">114</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kotlin/">kotlin</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">68</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mac/">mac</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/memcached/">memcached</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">72</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">41</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">185</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">44</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E5%AE%83/">其它</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a><span class="category-list-count">50</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/">开源项目</a><span class="category-list-count">73</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/">生活随笔</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93/">量化交易</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AndroidStudio/" style="font-size: 13.75px;">AndroidStudio</a> <a href="/tags/AndroidUI/" style="font-size: 20px;">AndroidUI</a> <a href="/tags/Android%E4%BA%8B%E4%BB%B6%E6%8B%A6%E6%88%AA/" style="font-size: 11.25px;">Android事件拦截</a> <a href="/tags/Android%E5%BC%80%E6%BA%90/" style="font-size: 18.13px;">Android开源</a> <a href="/tags/CI/" style="font-size: 15.63px;">CI</a> <a href="/tags/CURL/" style="font-size: 13.13px;">CURL</a> <a href="/tags/DEDE/" style="font-size: 19.38px;">DEDE</a> <a href="/tags/Docker/" style="font-size: 14.38px;">Docker</a> <a href="/tags/Flask/" style="font-size: 10.63px;">Flask</a> <a href="/tags/JavaSE/" style="font-size: 17.5px;">JavaSE</a> <a href="/tags/Laravel/" style="font-size: 18.13px;">Laravel</a> <a href="/tags/Maven/" style="font-size: 10.63px;">Maven</a> <a href="/tags/SVN/" style="font-size: 10px;">SVN</a> <a href="/tags/SpringBoot/" style="font-size: 18.75px;">SpringBoot</a> <a href="/tags/Thinkphp/" style="font-size: 10px;">Thinkphp</a> <a href="/tags/UEditor/" style="font-size: 11.88px;">UEditor</a> <a href="/tags/VMware/" style="font-size: 12.5px;">VMware</a> <a href="/tags/Vue/" style="font-size: 18.13px;">Vue</a> <a href="/tags/WebSocket/" style="font-size: 13.13px;">WebSocket</a> <a href="/tags/ecshop/" style="font-size: 15px;">ecshop</a> <a href="/tags/scrapy/" style="font-size: 14.38px;">scrapy</a> <a href="/tags/smarty/" style="font-size: 12.5px;">smarty</a> <a href="/tags/socket/" style="font-size: 15px;">socket</a> <a href="/tags/sphinx/" style="font-size: 11.88px;">sphinx</a> <a href="/tags/vagrant/" style="font-size: 12.5px;">vagrant</a> <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 11.25px;">微服务</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/" style="font-size: 15.63px;">数据传输</a> <a href="/tags/%E6%AD%A3%E5%88%99/" style="font-size: 11.88px;">正则</a> <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 16.25px;">消息队列</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 16.88px;">爬虫</a> <a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 17.5px;">集群</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/27/Java%E6%95%99%E7%A8%8B%E7%B4%A2%E5%BC%95/">Java教程索引</a>
          </li>
        
          <li>
            <a href="/2022/11/03/Ubuntu%E5%AE%89%E8%A3%85Docker/">Ubuntu安装Docker</a>
          </li>
        
          <li>
            <a href="/2022/11/02/Dockerfile-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">Dockerfile 最佳实践</a>
          </li>
        
          <li>
            <a href="/2022/11/02/Docker-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/">Docker 快速入门</a>
          </li>
        
          <li>
            <a href="/2022/11/02/SpringBoot-%E5%AE%9E%E7%8E%B0-Websocket-%E9%80%9A%E4%BF%A1%E8%AF%A6%E8%A7%A3/">SpringBoot 实现 Websocket 通信详解(小豆丁技术栈)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 moqiang<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>

<!-- rex -->

<script src="/js/toc.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>